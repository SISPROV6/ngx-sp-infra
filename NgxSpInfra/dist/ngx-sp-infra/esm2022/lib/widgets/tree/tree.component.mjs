import { Component, EventEmitter, Input, Output } from "@angular/core";
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "@angular/forms";
import * as i3 from "../svg-storage/svg-storage.component";
import * as i4 from "./pipes/search-tree.pipe";
export class TreeComponent {
    constructor() {
        // #region ==========> PROPERTIES <==========
        // #region PUBLIC
        this.items = [];
        this.checkbox = false;
        this.filter = false;
        this.onSelect = new EventEmitter();
        this.onEvent = new EventEmitter();
        this.checked = (item) => item.is_selected == true;
        this.search = "";
    }
    ngOnInit() { }
    // #endregion PUBLIC
    // #endregion ==========> PROPERTIES <==========
    // #region ==========> PUBLIC METHODS <==========
    onExpand(item) {
        if (item.expanded) {
            item.expanded = !item.expanded;
            return;
        }
        else {
            if (item.children) {
                if (item.children.length > 0) {
                    item.expanded = true;
                }
                else {
                    item.expanded = false;
                }
            }
        }
    }
    onCheck(items, item) {
        if (item.has_children) {
            item.children.forEach((firstNode) => {
                if (firstNode.is_selected != item.is_selected) {
                    firstNode.is_selected = !firstNode.is_selected;
                }
                if (firstNode.has_children) {
                    firstNode.children.forEach((secondNode) => {
                        if (secondNode.is_selected != firstNode.is_selected) {
                            secondNode.is_selected = !secondNode.is_selected;
                        }
                    });
                }
            });
        }
        if (this.indeterminateCheck(items)) {
            this.onSelect.emit(true);
        }
        else if (!this.indeterminateCheck(items)) {
            this.onSelect.emit(false);
        }
    }
    onCheckEvent(items) {
        if (this.indeterminateCheck(items)) {
            this.onEvent.emit(true);
        }
        else {
            this.onEvent.emit(false);
        }
    }
    // #endregion ==========> PUBLIC METHODS <==========
    // #region ==========> PRIVATE METHODS <==========
    indeterminateCheck(list) {
        return list.some(this.checked);
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.11", ngImport: i0, type: TreeComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "17.3.11", type: TreeComponent, selector: "app-tree", inputs: { items: "items", checkbox: "checkbox", filter: "filter" }, outputs: { onSelect: "onSelect", onEvent: "onEvent" }, ngImport: i0, template: "<!-- FILTER -->\n<ng-template [ngIf]=\"filter\">\n  <!-- <app-search-filters></app-search-filters> -->\n\n  <div class=\"input-group glb-search-input my-3\">\n    <span class=\"input-group-text search px-2 glb-bg-color-white\">\n      <app-svg-storage svgName=\"search\" svgColor=\"gray\" svgSize=\"medium-small\"\n        class=\"d-flex align-items-center\"></app-svg-storage>\n    </span>\n    <input type=\"text\" class=\"form-control border-left-none ps-0\" [(ngModel)]=\"search\">\n  </div>\n  \n</ng-template>\n<!-- TREE -->\n<ul class=\"tree-view\">\n  <ng-container *ngFor=\"let item of items | TreeFilter : search; index as i\">\n    <div class=\"container py-1\" [class]=\"!item.has_children ? 'children' : null \">\n      <app-svg-storage\n        class=\"chevron\"\n        *ngIf=\"item.has_children\"\n        [class]=\"item.aplicClass ? 'rotate' : null\"\n        (click)=\"\n          onExpand(item);\n          item.aplicClass ? (item.aplicClass = false) : (item.aplicClass = true)\n        \"\n        svgSize=\"medium-small\"\n        svgName=\"chevron-right\"\n      ></app-svg-storage>\n      <!-- CHECKBOX -->\n      <ng-template [ngIf]=\"checkbox\">\n        <input\n          type=\"checkbox\"\n          class=\"form-check-input m-0 position-relative\"\n          [checked]=\"onCheckEvent(items)\"\n          (change)=\"onCheck(items, item)\"\n          [(ngModel)]=\"item.is_selected\"\n        />\n      </ng-template>\n      <label class=\"label mb-0 ms-2\">{{ item.label }}</label>\n    </div>\n    <!-- NODES -->\n    <ul *ngIf=\"item.expanded\">\n      <app-tree\n        (onSelect)=\"item.is_selected = $event\"\n        (onEvent)=\"item.is_selected = $event\"\n        [items]=\"item.children\"\n        [checkbox]=\"checkbox\"\n      ></app-tree>\n    </ul>\n  </ng-container>\n</ul>", styles: ["*{font-family:Open Sans,Arial,Helvetica,sans-serif;color:#000;box-sizing:border-box;list-style:none;font-size:1rem}.tree-view{margin:0;padding:0;list-style-type:none;transition:all .3s ease-in-out}.container{margin:0;padding:0;display:flex;align-items:center}.chevron{position:relative;-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0);-webkit-transition:.3s ease-in-out;-moz-transition:.3s ease-in-out;-o-transition:.3s ease-in-out;transition:.3s ease-in-out;color:#000;cursor:pointer}.chevron:hover{color:#0d6efd;transform:rotate(30deg)}.chevron.rotate{transform:rotate(90deg);-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);-moz-transform:rotate(90deg);-o-transform:rotate(90deg);transition:.3s}.form-check-input{cursor:pointer}.children{padding-left:20px}\n"], dependencies: [{ kind: "directive", type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i2.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i2.CheckboxControlValueAccessor, selector: "input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]" }, { kind: "directive", type: i2.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i2.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "component", type: i3.SvgStorageComponent, selector: "app-svg-storage", inputs: ["svgName", "svgColor", "svgFill", "svgSize", "svgStrokeWidth"] }, { kind: "component", type: TreeComponent, selector: "app-tree", inputs: ["items", "checkbox", "filter"], outputs: ["onSelect", "onEvent"] }, { kind: "pipe", type: i4.SearchTreePipe, name: "TreeFilter" }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.11", ngImport: i0, type: TreeComponent, decorators: [{
            type: Component,
            args: [{ selector: "app-tree", template: "<!-- FILTER -->\n<ng-template [ngIf]=\"filter\">\n  <!-- <app-search-filters></app-search-filters> -->\n\n  <div class=\"input-group glb-search-input my-3\">\n    <span class=\"input-group-text search px-2 glb-bg-color-white\">\n      <app-svg-storage svgName=\"search\" svgColor=\"gray\" svgSize=\"medium-small\"\n        class=\"d-flex align-items-center\"></app-svg-storage>\n    </span>\n    <input type=\"text\" class=\"form-control border-left-none ps-0\" [(ngModel)]=\"search\">\n  </div>\n  \n</ng-template>\n<!-- TREE -->\n<ul class=\"tree-view\">\n  <ng-container *ngFor=\"let item of items | TreeFilter : search; index as i\">\n    <div class=\"container py-1\" [class]=\"!item.has_children ? 'children' : null \">\n      <app-svg-storage\n        class=\"chevron\"\n        *ngIf=\"item.has_children\"\n        [class]=\"item.aplicClass ? 'rotate' : null\"\n        (click)=\"\n          onExpand(item);\n          item.aplicClass ? (item.aplicClass = false) : (item.aplicClass = true)\n        \"\n        svgSize=\"medium-small\"\n        svgName=\"chevron-right\"\n      ></app-svg-storage>\n      <!-- CHECKBOX -->\n      <ng-template [ngIf]=\"checkbox\">\n        <input\n          type=\"checkbox\"\n          class=\"form-check-input m-0 position-relative\"\n          [checked]=\"onCheckEvent(items)\"\n          (change)=\"onCheck(items, item)\"\n          [(ngModel)]=\"item.is_selected\"\n        />\n      </ng-template>\n      <label class=\"label mb-0 ms-2\">{{ item.label }}</label>\n    </div>\n    <!-- NODES -->\n    <ul *ngIf=\"item.expanded\">\n      <app-tree\n        (onSelect)=\"item.is_selected = $event\"\n        (onEvent)=\"item.is_selected = $event\"\n        [items]=\"item.children\"\n        [checkbox]=\"checkbox\"\n      ></app-tree>\n    </ul>\n  </ng-container>\n</ul>", styles: ["*{font-family:Open Sans,Arial,Helvetica,sans-serif;color:#000;box-sizing:border-box;list-style:none;font-size:1rem}.tree-view{margin:0;padding:0;list-style-type:none;transition:all .3s ease-in-out}.container{margin:0;padding:0;display:flex;align-items:center}.chevron{position:relative;-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0);-webkit-transition:.3s ease-in-out;-moz-transition:.3s ease-in-out;-o-transition:.3s ease-in-out;transition:.3s ease-in-out;color:#000;cursor:pointer}.chevron:hover{color:#0d6efd;transform:rotate(30deg)}.chevron.rotate{transform:rotate(90deg);-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);-moz-transform:rotate(90deg);-o-transform:rotate(90deg);transition:.3s}.form-check-input{cursor:pointer}.children{padding-left:20px}\n"] }]
        }], ctorParameters: () => [], propDecorators: { items: [{
                type: Input
            }], checkbox: [{
                type: Input
            }], filter: [{
                type: Input
            }], onSelect: [{
                type: Output
            }], onEvent: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJlZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3gtc3AtaW5mcmEvc3JjL2xpYi93aWRnZXRzL3RyZWUvdHJlZS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3gtc3AtaW5mcmEvc3JjL2xpYi93aWRnZXRzL3RyZWUvdHJlZS5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQVUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDOzs7Ozs7QUFRL0UsTUFBTSxPQUFPLGFBQWE7SUFDeEI7UUFJQSw2Q0FBNkM7UUFFN0MsaUJBQWlCO1FBQ0QsVUFBSyxHQUFxQixFQUFFLENBQUM7UUFDN0IsYUFBUSxHQUFZLEtBQUssQ0FBQztRQUMxQixXQUFNLEdBQVksS0FBSyxDQUFDO1FBRXZCLGFBQVEsR0FBMEIsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUNyRCxZQUFPLEdBQTBCLElBQUksWUFBWSxFQUFFLENBQUM7UUFFOUQsWUFBTyxHQUFHLENBQUMsSUFBYyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQztRQUV2RCxXQUFNLEdBQVcsRUFBRSxDQUFDO0lBaEJaLENBQUM7SUFFaEIsUUFBUSxLQUFVLENBQUM7SUFlbkIsb0JBQW9CO0lBRXBCLGdEQUFnRDtJQUVoRCxpREFBaUQ7SUFDMUMsUUFBUSxDQUFDLElBQWM7UUFDNUIsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDbEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7WUFDL0IsT0FBTztRQUNULENBQUM7YUFBTSxDQUFDO1lBQ04sSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7Z0JBQ2xCLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7b0JBQzdCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO2dCQUN2QixDQUFDO3FCQUFNLENBQUM7b0JBQ04sSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7Z0JBQ3hCLENBQUM7WUFDSCxDQUFDO1FBQ0gsQ0FBQztJQUNILENBQUM7SUFFTSxPQUFPLENBQUMsS0FBaUIsRUFBRSxJQUFjO1FBQzlDLElBQUksSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1lBQ3RCLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxFQUFFLEVBQUU7Z0JBQ2xDLElBQUksU0FBUyxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7b0JBQzlDLFNBQVMsQ0FBQyxXQUFXLEdBQUcsQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDO2dCQUNqRCxDQUFDO2dCQUNELElBQUksU0FBUyxDQUFDLFlBQVksRUFBRSxDQUFDO29CQUMzQixTQUFTLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFVBQVUsRUFBRSxFQUFFO3dCQUN4QyxJQUFJLFVBQVUsQ0FBQyxXQUFXLElBQUksU0FBUyxDQUFDLFdBQVcsRUFBRSxDQUFDOzRCQUNwRCxVQUFVLENBQUMsV0FBVyxHQUFHLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQzt3QkFDbkQsQ0FBQztvQkFDSCxDQUFDLENBQUMsQ0FBQztnQkFDTCxDQUFDO1lBQ0gsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDO1FBQ0QsSUFBSSxJQUFJLENBQUMsa0JBQWtCLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztZQUNuQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzQixDQUFDO2FBQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO1lBQzNDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzVCLENBQUM7SUFDSCxDQUFDO0lBRU0sWUFBWSxDQUFDLEtBQWlCO1FBQ25DLElBQUksSUFBSSxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7WUFDbkMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDMUIsQ0FBQzthQUFNLENBQUM7WUFDTixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMzQixDQUFDO0lBQ0gsQ0FBQztJQUNELG9EQUFvRDtJQUVwRCxrREFBa0Q7SUFFMUMsa0JBQWtCLENBQUMsSUFBZ0I7UUFDekMsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNqQyxDQUFDOytHQXpFVSxhQUFhO21HQUFiLGFBQWEsMktDUjFCLDB4REFrREssbS9ERDFDUSxhQUFhOzs0RkFBYixhQUFhO2tCQUx6QixTQUFTOytCQUNFLFVBQVU7d0RBWUosS0FBSztzQkFBcEIsS0FBSztnQkFDVSxRQUFRO3NCQUF2QixLQUFLO2dCQUNVLE1BQU07c0JBQXJCLEtBQUs7Z0JBRVcsUUFBUTtzQkFBeEIsTUFBTTtnQkFDVSxPQUFPO3NCQUF2QixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIElucHV0LCBPbkluaXQsIE91dHB1dCB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBUcmVlSXRlbSB9IGZyb20gXCIuL21vZGVscy90cmVlLWl0ZW1cIjtcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiBcImFwcC10cmVlXCIsXG4gIHRlbXBsYXRlVXJsOiBcIi4vdHJlZS5jb21wb25lbnQuaHRtbFwiLFxuICBzdHlsZVVybHM6IFtcIi4vdHJlZS5jb21wb25lbnQuc2Nzc1wiXVxufSlcbmV4cG9ydCBjbGFzcyBUcmVlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgY29uc3RydWN0b3IoKSB7fVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge31cblxuICAvLyAjcmVnaW9uID09PT09PT09PT0+IFBST1BFUlRJRVMgPD09PT09PT09PT1cblxuICAvLyAjcmVnaW9uIFBVQkxJQ1xuICBASW5wdXQoKSBwdWJsaWMgaXRlbXM6IFRyZWVJdGVtW10gfCBhbnkgPSBbXTtcbiAgQElucHV0KCkgcHVibGljIGNoZWNrYm94OiBib29sZWFuID0gZmFsc2U7XG4gIEBJbnB1dCgpIHB1YmxpYyBmaWx0ZXI6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBAT3V0cHV0KCkgcHVibGljIG9uU2VsZWN0OiBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIEBPdXRwdXQoKSBwdWJsaWMgb25FdmVudDogRXZlbnRFbWl0dGVyPGJvb2xlYW4+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIHB1YmxpYyBjaGVja2VkID0gKGl0ZW06IFRyZWVJdGVtKSA9PiBpdGVtLmlzX3NlbGVjdGVkID09IHRydWU7XG5cbiAgcHVibGljIHNlYXJjaDogc3RyaW5nID0gXCJcIjtcbiAgLy8gI2VuZHJlZ2lvbiBQVUJMSUNcblxuICAvLyAjZW5kcmVnaW9uID09PT09PT09PT0+IFBST1BFUlRJRVMgPD09PT09PT09PT1cblxuICAvLyAjcmVnaW9uID09PT09PT09PT0+IFBVQkxJQyBNRVRIT0RTIDw9PT09PT09PT09XG4gIHB1YmxpYyBvbkV4cGFuZChpdGVtOiBUcmVlSXRlbSk6IHZvaWQge1xuICAgIGlmIChpdGVtLmV4cGFuZGVkKSB7XG4gICAgICBpdGVtLmV4cGFuZGVkID0gIWl0ZW0uZXhwYW5kZWQ7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpdGVtLmNoaWxkcmVuKSB7XG4gICAgICAgIGlmIChpdGVtLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBpdGVtLmV4cGFuZGVkID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtLmV4cGFuZGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb25DaGVjayhpdGVtczogVHJlZUl0ZW1bXSwgaXRlbTogVHJlZUl0ZW0pOiB2b2lkIHtcbiAgICBpZiAoaXRlbS5oYXNfY2hpbGRyZW4pIHtcbiAgICAgIGl0ZW0uY2hpbGRyZW4uZm9yRWFjaCgoZmlyc3ROb2RlKSA9PiB7XG4gICAgICAgIGlmIChmaXJzdE5vZGUuaXNfc2VsZWN0ZWQgIT0gaXRlbS5pc19zZWxlY3RlZCkge1xuICAgICAgICAgIGZpcnN0Tm9kZS5pc19zZWxlY3RlZCA9ICFmaXJzdE5vZGUuaXNfc2VsZWN0ZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpcnN0Tm9kZS5oYXNfY2hpbGRyZW4pIHtcbiAgICAgICAgICBmaXJzdE5vZGUuY2hpbGRyZW4uZm9yRWFjaCgoc2Vjb25kTm9kZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHNlY29uZE5vZGUuaXNfc2VsZWN0ZWQgIT0gZmlyc3ROb2RlLmlzX3NlbGVjdGVkKSB7XG4gICAgICAgICAgICAgIHNlY29uZE5vZGUuaXNfc2VsZWN0ZWQgPSAhc2Vjb25kTm9kZS5pc19zZWxlY3RlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh0aGlzLmluZGV0ZXJtaW5hdGVDaGVjayhpdGVtcykpIHtcbiAgICAgIHRoaXMub25TZWxlY3QuZW1pdCh0cnVlKTtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLmluZGV0ZXJtaW5hdGVDaGVjayhpdGVtcykpIHtcbiAgICAgIHRoaXMub25TZWxlY3QuZW1pdChmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG9uQ2hlY2tFdmVudChpdGVtczogVHJlZUl0ZW1bXSkge1xuICAgIGlmICh0aGlzLmluZGV0ZXJtaW5hdGVDaGVjayhpdGVtcykpIHtcbiAgICAgIHRoaXMub25FdmVudC5lbWl0KHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9uRXZlbnQuZW1pdChmYWxzZSk7XG4gICAgfVxuICB9XG4gIC8vICNlbmRyZWdpb24gPT09PT09PT09PT4gUFVCTElDIE1FVEhPRFMgPD09PT09PT09PT1cblxuICAvLyAjcmVnaW9uID09PT09PT09PT0+IFBSSVZBVEUgTUVUSE9EUyA8PT09PT09PT09PVxuXG4gIHByaXZhdGUgaW5kZXRlcm1pbmF0ZUNoZWNrKGxpc3Q6IFRyZWVJdGVtW10pOiBib29sZWFuIHtcbiAgICByZXR1cm4gbGlzdC5zb21lKHRoaXMuY2hlY2tlZCk7XG4gIH1cblxuICAvLyBwcml2YXRlIGFsbENoZWNrKGxpc3Q6IFRyZWVJdGVtW10pOiBib29sZWFuIHtcbiAgLy8gICByZXR1cm4gbGlzdC5ldmVyeSh0aGlzLmNoZWNrZWQpO1xuICAvLyB9XG4gIC8vICNlbmRyZWdpb24gPT09PT09PT09PT4gUFJJVkFURSBNRVRIT0RTIDw9PT09PT09PT09XG59XG4iLCI8IS0tIEZJTFRFUiAtLT5cbjxuZy10ZW1wbGF0ZSBbbmdJZl09XCJmaWx0ZXJcIj5cbiAgPCEtLSA8YXBwLXNlYXJjaC1maWx0ZXJzPjwvYXBwLXNlYXJjaC1maWx0ZXJzPiAtLT5cblxuICA8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXAgZ2xiLXNlYXJjaC1pbnB1dCBteS0zXCI+XG4gICAgPHNwYW4gY2xhc3M9XCJpbnB1dC1ncm91cC10ZXh0IHNlYXJjaCBweC0yIGdsYi1iZy1jb2xvci13aGl0ZVwiPlxuICAgICAgPGFwcC1zdmctc3RvcmFnZSBzdmdOYW1lPVwic2VhcmNoXCIgc3ZnQ29sb3I9XCJncmF5XCIgc3ZnU2l6ZT1cIm1lZGl1bS1zbWFsbFwiXG4gICAgICAgIGNsYXNzPVwiZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlclwiPjwvYXBwLXN2Zy1zdG9yYWdlPlxuICAgIDwvc3Bhbj5cbiAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbCBib3JkZXItbGVmdC1ub25lIHBzLTBcIiBbKG5nTW9kZWwpXT1cInNlYXJjaFwiPlxuICA8L2Rpdj5cbiAgXG48L25nLXRlbXBsYXRlPlxuPCEtLSBUUkVFIC0tPlxuPHVsIGNsYXNzPVwidHJlZS12aWV3XCI+XG4gIDxuZy1jb250YWluZXIgKm5nRm9yPVwibGV0IGl0ZW0gb2YgaXRlbXMgfCBUcmVlRmlsdGVyIDogc2VhcmNoOyBpbmRleCBhcyBpXCI+XG4gICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lciBweS0xXCIgW2NsYXNzXT1cIiFpdGVtLmhhc19jaGlsZHJlbiA/ICdjaGlsZHJlbicgOiBudWxsIFwiPlxuICAgICAgPGFwcC1zdmctc3RvcmFnZVxuICAgICAgICBjbGFzcz1cImNoZXZyb25cIlxuICAgICAgICAqbmdJZj1cIml0ZW0uaGFzX2NoaWxkcmVuXCJcbiAgICAgICAgW2NsYXNzXT1cIml0ZW0uYXBsaWNDbGFzcyA/ICdyb3RhdGUnIDogbnVsbFwiXG4gICAgICAgIChjbGljayk9XCJcbiAgICAgICAgICBvbkV4cGFuZChpdGVtKTtcbiAgICAgICAgICBpdGVtLmFwbGljQ2xhc3MgPyAoaXRlbS5hcGxpY0NsYXNzID0gZmFsc2UpIDogKGl0ZW0uYXBsaWNDbGFzcyA9IHRydWUpXG4gICAgICAgIFwiXG4gICAgICAgIHN2Z1NpemU9XCJtZWRpdW0tc21hbGxcIlxuICAgICAgICBzdmdOYW1lPVwiY2hldnJvbi1yaWdodFwiXG4gICAgICA+PC9hcHAtc3ZnLXN0b3JhZ2U+XG4gICAgICA8IS0tIENIRUNLQk9YIC0tPlxuICAgICAgPG5nLXRlbXBsYXRlIFtuZ0lmXT1cImNoZWNrYm94XCI+XG4gICAgICAgIDxpbnB1dFxuICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXG4gICAgICAgICAgY2xhc3M9XCJmb3JtLWNoZWNrLWlucHV0IG0tMCBwb3NpdGlvbi1yZWxhdGl2ZVwiXG4gICAgICAgICAgW2NoZWNrZWRdPVwib25DaGVja0V2ZW50KGl0ZW1zKVwiXG4gICAgICAgICAgKGNoYW5nZSk9XCJvbkNoZWNrKGl0ZW1zLCBpdGVtKVwiXG4gICAgICAgICAgWyhuZ01vZGVsKV09XCJpdGVtLmlzX3NlbGVjdGVkXCJcbiAgICAgICAgLz5cbiAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICA8bGFiZWwgY2xhc3M9XCJsYWJlbCBtYi0wIG1zLTJcIj57eyBpdGVtLmxhYmVsIH19PC9sYWJlbD5cbiAgICA8L2Rpdj5cbiAgICA8IS0tIE5PREVTIC0tPlxuICAgIDx1bCAqbmdJZj1cIml0ZW0uZXhwYW5kZWRcIj5cbiAgICAgIDxhcHAtdHJlZVxuICAgICAgICAob25TZWxlY3QpPVwiaXRlbS5pc19zZWxlY3RlZCA9ICRldmVudFwiXG4gICAgICAgIChvbkV2ZW50KT1cIml0ZW0uaXNfc2VsZWN0ZWQgPSAkZXZlbnRcIlxuICAgICAgICBbaXRlbXNdPVwiaXRlbS5jaGlsZHJlblwiXG4gICAgICAgIFtjaGVja2JveF09XCJjaGVja2JveFwiXG4gICAgICA+PC9hcHAtdHJlZT5cbiAgICA8L3VsPlxuICA8L25nLWNvbnRhaW5lcj5cbjwvdWw+Il19
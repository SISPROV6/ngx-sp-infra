export class Utils {
    // Obtém a mensagem de erro de uma requisição http
    static getHttpErrorMessage(error) {
        let errorMessage = '';
        if (error.error instanceof ErrorEvent) {
            // Erro ocorreu no lado do client
            errorMessage = error.error.message;
        }
        else {
            // Erro ocorreu no lado do servidor
            if (error.status) {
                if (error.status == 200) {
                    if (error.error) {
                        if (error.error.ErrorMessage) {
                            errorMessage = `${error.error.ErrorMessage}`;
                        }
                        else {
                            errorMessage = `${error.error.Message}`;
                        }
                    }
                    else {
                        errorMessage = error.message;
                    }
                }
                else {
                    if (error.error) {
                        if (error.error.ErrorMessage) {
                            errorMessage = `${error.error.ErrorMessage}<br><br>${error.status} - ${error.statusText}`;
                        }
                        else {
                            errorMessage = `${error.error.Message}<br><br>${error.status} - ${error.statusText}`;
                        }
                    }
                    else {
                        errorMessage = error.message;
                    }
                }
            }
            else {
                errorMessage = error.message;
            }
        }
        return errorMessage;
    }
    ;
    static convertDateTimeToDateString(date) {
        const dateString = date.toString().split('T')[0].split('-');
        return `${dateString[0]}-${dateString[1]}-${dateString[2]}`;
    }
    static convertStringToDate(text) {
        const dateString = text.split('-');
        return new Date(+dateString[0], (+dateString[1]) - 1, +dateString[2]);
    }
    /**
     * Verifica se um determinado ano é bissexto.
     * @param year Ano a ser verificado.
     * @returns Retorna true se o ano for bissexto e false se ele não for, ou se o ano informado for inválido.
     */
    static isLeapYear(year) {
        const YEAR_NUMBER = typeof year === 'string' ? parseInt(year) : year;
        if (!isNaN(YEAR_NUMBER)) {
            if ((YEAR_NUMBER % 4 === 0 && YEAR_NUMBER % 100 !== 0) || YEAR_NUMBER % 400 === 0)
                return true;
            else
                return false;
        }
        else
            return false;
    }
    /**
     * Verifica se uma determinada data é indeterminada.
     * @param dateTime Data a ser verificada.
     * @returns Retorna true se for indeterminada e false se não for.
     */
    static verifyDateIsIndeterminate(dateTime) {
        return dateTime.toString().split('T')[0] === '2099-12-31';
    }
    /**
     * Verifica se uma determinada data é nula (igual a '1900-01-01T00:00:00').
     * @param dateTime Data a ser verificada.
     * @returns Retorna true se for nula e false se não for.
     */
    static verifyDateIsNull(dateTime) {
        return dateTime.toString().split('T')[0] === '1900-01-01';
    }
    /**
     * Tenta realizar um parse de uma data com os seguintes valores: dd/MM/yyyy HH:mm
     *
     * @param value String que contém a data formatada em pt-br
     * @param dateSeparator Separador da data.
     * @returns
     */
    static parseDateTime(value, dateSeparator = "/") {
        let usDate = "";
        value = value.trim();
        let dateAndTime = value.split(" ");
        // Possui pelo menos 5 caracteres: 1/1/1
        if (value.length >= 5) {
            let dateSeparated = dateAndTime[0].split(dateSeparator);
            if (dateSeparated.length !== 3) {
                return;
            }
            if (dateSeparated[2].length > 2) {
                dateSeparated[2] = `${dateSeparated[2].charAt(0)}${dateSeparated[2].charAt(1)}`.trim();
            }
            usDate = `${dateSeparated[1]}/${dateSeparated[0]}/${dateSeparated[2]}`;
        }
        if (dateAndTime.length === 2) {
            usDate += ` ${dateAndTime[1]}`;
        }
        let expectedDate = Date.parse(usDate);
        if (expectedDate !== null || expectedDate < 0) {
            return;
        }
        return new Date(expectedDate);
    }
    // Obtém a Data local
    static getDateLocalTime(date) {
        return (new Date(date.getTime() - date.getTimezoneOffset() * 60000));
    }
    // Obtém a Data local no Padrão Iso
    static getDateLocalTimeISO(date) {
        return (this.getDateLocalTime(date).toISOString().replace('.000Z', ''));
    }
    static getDatePickerDate(str) {
        const [dateComponents, timeComponents] = str.split('T');
        const [ano, mes, dia] = dateComponents.split('-');
        const [hora, minuto, segundo] = timeComponents.split(':');
        const date = new Date(Number(ano), Number(mes), Number(dia));
        return date;
    }
    static AdicionaDias(data, days) {
        const find = new Date(Number(data));
        find.setDate(data.getDate() + days);
        return find;
    }
    static DiferencaDias(dataInicial, dataFinal) {
        var Time = dataFinal.getTime() - dataInicial.getTime();
        return Time / (1000 * 3600 * 24);
    }
    static DiferencaMeses(dataInicial, dataFinal) {
        var meses = (dataFinal.getFullYear() - dataInicial.getFullYear()) * 12;
        meses -= dataInicial.getMonth();
        meses += dataFinal.getMonth();
        return meses <= 0 ? 0 : meses;
    }
    //Obtém a Data UTC com hora zerada
    static getDateUTC(date) {
        //codigo original
        //return new Date(date.getTime() + (date.getTimezoneOffset() * 60000));
        let dataSaida;
        try {
            dataSaida = new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), 0, 0, 0);
        }
        catch (error) {
            //Quando date chega neste formato: 2022-06-20T00:00:00
            //tento pegar ano/mes/dia direto 
            //Date(DtIniFer.getUTCFullYear(), DtIniFer.getUTCMonth(), DtIniFer.getUTCDate(), 0 , 0 , 0);
            //e não funciona
            const dia = date.toString().substring(8, 10);
            const mes = date.toString().substring(5, 7);
            const ano = date.toString().substring(0, 4);
            dataSaida = new Date(Number(ano), Number(mes) - 1, Number(dia), 0, 0, 0);
        }
        return dataSaida;
    }
    //Obtém a Data UTC com hora zerada
    static getDateddMMyyy(date) {
        //codigo original
        //return new Date(date.getTime() + (date.getTimezoneOffset() * 60000));
        let dataSaida;
        try {
            dataSaida = new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), 0, 0, 0);
        }
        catch (error) {
            //Quando date chega neste formato: 2022-06-20T00:00:00
            //tento pegar ano/mes/dia direto 
            //Date(DtIniFer.getUTCFullYear(), DtIniFer.getUTCMonth(), DtIniFer.getUTCDate(), 0 , 0 , 0);
            //e não funciona
            const dia = date.toString().substring(8, 10);
            const mes = date.toString().substring(5, 7);
            const ano = date.toString().substring(0, 4);
            dataSaida = new Date(Number(ano), Number(mes) - 1, Number(dia), 0, 0, 0);
        }
        function pad(s) { return (s < 10) ? '0' + s : s; }
        return [pad(dataSaida.getUTCDate()), pad(dataSaida.getUTCMonth() + 1), pad(dataSaida.getUTCFullYear())].join('/');
    }
    //Obtém a Data UTC com a hora
    static getDateddMMyyyyHhmmss(date) {
        let dataSaida;
        try {
            dataSaida = new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getHours(), date.getMinutes(), date.getSeconds());
        }
        catch (error) {
            //Quando date chega neste formato: 2022-06-20T00:00:00
            //tento pegar ano/mes/dia direto 
            //Date(DtIniFer.getUTCFullYear(), DtIniFer.getUTCMonth(), DtIniFer.getUTCDate(), 0 , 0 , 0);
            //e não funciona
            const dia = date.toString().substring(8, 10);
            const mes = date.toString().substring(5, 7);
            const ano = date.toString().substring(0, 4);
            const hora = date.toString().substring(11, 13);
            const minutos = date.toString().substring(14, 16);
            const segundos = date.toString().substring(17, 19);
            dataSaida = new Date(Number(ano), Number(mes) - 1, Number(dia), Number(hora), Number(minutos), Number(segundos));
        }
        function pad(s) { return (s < 10) ? '0' + s : s; }
        let dataFormatada = [pad(dataSaida.getDate()), pad(dataSaida.getUTCMonth() + 1), pad(dataSaida.getUTCFullYear())].join('/');
        dataFormatada += " ";
        dataFormatada += [pad(dataSaida.getHours()), pad(dataSaida.getMinutes()), pad(dataSaida.getSeconds())].join(':');
        return dataFormatada;
    }
    static UltimoDiaMes(data) {
        let dataSaida = this.getDateTimeUTC(data);
        // adiciona 1 mes
        dataSaida.setMonth(dataSaida.getUTCMonth() + 1);
        //Posiciona no dia 01 do mes adicionado
        dataSaida = new Date(dataSaida.getUTCFullYear(), dataSaida.getUTCMonth(), 1, 0, 0, 0);
        // subtrai 1 dia para ir para o ultimo dia do mes
        dataSaida.setDate(dataSaida.getDate() - 1);
        return dataSaida;
    }
    //Obtém a Data/hora UTC
    static getDateTimeUTC(date) {
        let dataSaida;
        try {
            dataSaida = new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getHours(), date.getMinutes(), date.getSeconds());
        }
        catch (error) {
            //Quando date chega neste formato: 2022-06-20T11:12:13
            const dia = date.toString().substring(8, 10);
            const mes = date.toString().substring(5, 7);
            const ano = date.toString().substring(0, 4);
            const hora = date.toString().substring(11, 13);
            const min = date.toString().substring(14, 16);
            const seg = date.toString().substring(17, 19);
            dataSaida = new Date(Number(ano), Number(mes) - 1, Number(dia), Number(hora), Number(min), Number(seg));
        }
        return dataSaida;
    }
    static compareEqualDates(date1, date2) {
        let strDate1 = Utils.getDateddMMyyy(date1);
        let strDate2 = Utils.getDateddMMyyy(date2);
        if (strDate1 === strDate2) {
            return true;
        }
        else {
            return false;
        }
    }
    static convertMMYYYYToDate(value) {
        value = value.replace('/', '');
        let month = Number(value.substring(0, 2));
        let year = Number(value.substring(2, 6));
        //Diminui 1 pois no angular existe um índice do mês que não é igual ao mês.
        month = month - 1;
        return new Date(year, month, 1);
    }
    static getNullDate() {
        return new Date(1900, 0, 1, 0, 0, 0);
    }
    static getDateWebServiceFormat(value) {
        if (value.toString() == '') {
            return '1900-01-01';
        }
        let data = Utils.getDateddMMyyy(value);
        return data.substring(6, 10) + '-' + data.substring(3, 5) + '-' + data.substring(0, 2);
    }
    static getDateTimeWebServiceFormat(value) {
        if (value.toString() == '' || Utils.getDateddMMyyy(value) == Utils.getDateddMMyyy(this.getNullDate())) {
            return '1900-01-01T00:00:00';
        }
        const date = new Date(value);
        // Obtendo os componentes individuais da data
        const year = date.getFullYear();
        const month = date.getMonth();
        const day = date.getDate();
        const hours = date.getHours();
        const minutes = date.getMinutes();
        const seconds = date.getSeconds();
        const formattedDate = `${year}-${(month + 1).toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}T${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        return formattedDate;
    }
    //Transforma a string Base64 num array de bytes e faz o download do arquivo.
    static downloadFileBase64(fleName, file) {
        const byteString = window.atob(file);
        const arrayBuffer = new ArrayBuffer(byteString.length);
        const int8Array = new Uint8Array(arrayBuffer);
        for (let i = 0; i < byteString.length; i++) {
            int8Array[i] = byteString.charCodeAt(i);
        }
        const blob = new Blob([int8Array]);
        const url = window.URL.createObjectURL(blob);
        //Abio
        //O window.open foi comentado porque no download dos arquivos digitais abria uma janela com o blob do arquivo. 
        //Comentar não afetou o download do contra-cheque.  
        //window.open(url);
        var a = document.createElement('a');
        a.href = url;
        a.target = '_blank';
        a.download = fleName;
        document.body.appendChild(a);
        a.click();
    }
    /**
    * Abre o popup do navegador para baixar um arquivo que veio de um blob.
    *
    * @param blob Conteúdo do arquivo binário a ser baixado.
    * @param fileName Nome do arquivo a ser salvo.
    */
    static downloadFile(blob, fileName) {
        const anchor = window.document.createElement('a');
        anchor.href = window.URL.createObjectURL(blob);
        anchor.download = fileName;
        document.body.appendChild(anchor);
        anchor.click();
        document.body.removeChild(anchor);
        window.URL.revokeObjectURL(anchor.href);
    }
    static b64DecodeUnicode(str) {
        // Going backwards: from bytestream, to percent-encoding, to original string.
        return decodeURIComponent(atob(str).split('').map(c => {
            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
        }).join(''));
    }
    static b64EncodeUnicode(str) {
        // first we use encodeURIComponent to get percent-encoded UTF-8,
        // then we convert the percent encodings into raw bytes which
        // can be fed into btoa.
        return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (match, p1) => {
            return String.fromCharCode(("0x" + p1));
        }));
    }
    //Largura a partir de onde remonta o ngx_datatable para mobile
    static getIsMobile() {
        const width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
        return width < 768;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3gtc3AtaW5mcmEvc3JjL2xpYi91dGlscy91dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLE9BQU8sS0FBSztJQUVoQixrREFBa0Q7SUFDM0MsTUFBTSxDQUFDLG1CQUFtQixDQUFDLEtBQVU7UUFFMUMsSUFBSSxZQUFZLEdBQVcsRUFBRSxDQUFDO1FBRTlCLElBQUksS0FBSyxDQUFDLEtBQUssWUFBWSxVQUFVLEVBQUUsQ0FBQztZQUN0QyxpQ0FBaUM7WUFDakMsWUFBWSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDO1FBQ3JDLENBQUM7YUFBTSxDQUFDO1lBRU4sbUNBQW1DO1lBQ25DLElBQUksS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDO2dCQUVqQixJQUFJLEtBQUssQ0FBQyxNQUFNLElBQUksR0FBRyxFQUFFLENBQUM7b0JBRXhCLElBQUksS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDO3dCQUVoQixJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFFLENBQUM7NEJBQzdCLFlBQVksR0FBRyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFFLENBQUM7d0JBQy9DLENBQUM7NkJBQ0ksQ0FBQzs0QkFDSixZQUFZLEdBQUcsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO3dCQUMxQyxDQUFDO29CQUVILENBQUM7eUJBQU0sQ0FBQzt3QkFDTixZQUFZLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQztvQkFDL0IsQ0FBQztnQkFFSCxDQUFDO3FCQUNJLENBQUM7b0JBRUosSUFBSSxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7d0JBRWhCLElBQUksS0FBSyxDQUFDLEtBQUssQ0FBQyxZQUFZLEVBQUUsQ0FBQzs0QkFDN0IsWUFBWSxHQUFHLEdBQUcsS0FBSyxDQUFD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QUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsaUJBQWlCLEVBQzNELENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFO1lBQ1osT0FBTyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBUSxDQUFDLENBQUM7UUFDakQsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNSLENBQUM7SUFFRCw4REFBOEQ7SUFDdkQsTUFBTSxDQUFDLFdBQVc7UUFDdkIsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLFVBQVUsSUFBSSxRQUFRLENBQUMsZUFBZSxDQUFDLFdBQVcsSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQztRQUNyRyxPQUFPLEtBQUssR0FBRyxHQUFHLENBQUM7SUFDckIsQ0FBQztDQUVGIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFV0aWxzIHtcclxuXHJcbiAgLy8gT2J0w6ltIGEgbWVuc2FnZW0gZGUgZXJybyBkZSB1bWEgcmVxdWlzacOnw6NvIGh0dHBcclxuICBwdWJsaWMgc3RhdGljIGdldEh0dHBFcnJvck1lc3NhZ2UoZXJyb3I6IGFueSk6IHN0cmluZyB7XHJcblxyXG4gICAgbGV0IGVycm9yTWVzc2FnZTogc3RyaW5nID0gJyc7XHJcblxyXG4gICAgaWYgKGVycm9yLmVycm9yIGluc3RhbmNlb2YgRXJyb3JFdmVudCkge1xyXG4gICAgICAvLyBFcnJvIG9jb3JyZXUgbm8gbGFkbyBkbyBjbGllbnRcclxuICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3IuZXJyb3IubWVzc2FnZTtcclxuICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAvLyBFcnJvIG9jb3JyZXUgbm8gbGFkbyBkbyBzZXJ2aWRvclxyXG4gICAgICBpZiAoZXJyb3Iuc3RhdHVzKSB7XHJcblxyXG4gICAgICAgIGlmIChlcnJvci5zdGF0dXMgPT0gMjAwKSB7XHJcblxyXG4gICAgICAgICAgaWYgKGVycm9yLmVycm9yKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoZXJyb3IuZXJyb3IuRXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0gYCR7ZXJyb3IuZXJyb3IuRXJyb3JNZXNzYWdlfWA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0gYCR7ZXJyb3IuZXJyb3IuTWVzc2FnZX1gO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG5cclxuICAgICAgICAgIGlmIChlcnJvci5lcnJvcikge1xyXG5cclxuICAgICAgICAgICAgaWYgKGVycm9yLmVycm9yLkVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGAke2Vycm9yLmVycm9yLkVycm9yTWVzc2FnZX08YnI+PGJyPiR7ZXJyb3Iuc3RhdHVzfSAtICR7ZXJyb3Iuc3RhdHVzVGV4dH1gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGAke2Vycm9yLmVycm9yLk1lc3NhZ2V9PGJyPjxicj4ke2Vycm9yLnN0YXR1c30gLSAke2Vycm9yLnN0YXR1c1RleHR9YDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcclxuICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZXJyb3JNZXNzYWdlO1xyXG4gIH07XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgY29udmVydERhdGVUaW1lVG9EYXRlU3RyaW5nKGRhdGU6IERhdGUpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgZGF0ZVN0cmluZzogc3RyaW5nW10gPSBkYXRlLnRvU3RyaW5nKCkuc3BsaXQoJ1QnKVswXS5zcGxpdCgnLScpO1xyXG5cclxuICAgIHJldHVybiBgJHtkYXRlU3RyaW5nWzBdfS0ke2RhdGVTdHJpbmdbMV19LSR7ZGF0ZVN0cmluZ1syXX1gO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBjb252ZXJ0U3RyaW5nVG9EYXRlKHRleHQ6IHN0cmluZyk6IERhdGUge1xyXG4gICAgY29uc3QgZGF0ZVN0cmluZzogc3RyaW5nW10gPSB0ZXh0LnNwbGl0KCctJyk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBEYXRlKCtkYXRlU3RyaW5nWzBdLCAoK2RhdGVTdHJpbmdbMV0pIC0gMSwgK2RhdGVTdHJpbmdbMl0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVmVyaWZpY2Egc2UgdW0gZGV0ZXJtaW5hZG8gYW5vIMOpIGJpc3NleHRvLlxyXG4gICAqIEBwYXJhbSB5ZWFyIEFubyBhIHNlciB2ZXJpZmljYWRvLlxyXG4gICAqIEByZXR1cm5zIFJldG9ybmEgdHJ1ZSBzZSBvIGFubyBmb3IgYmlzc2V4dG8gZSBmYWxzZSBzZSBlbGUgbsOjbyBmb3IsIG91IHNlIG8gYW5vIGluZm9ybWFkbyBmb3IgaW52w6FsaWRvLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgaXNMZWFwWWVhcih5ZWFyOiBudW1iZXIgfCBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IFlFQVJfTlVNQkVSOiBudW1iZXIgPSB0eXBlb2YgeWVhciA9PT0gJ3N0cmluZycgPyBwYXJzZUludCh5ZWFyKSA6IHllYXI7XHJcblxyXG4gICAgaWYgKCFpc05hTihZRUFSX05VTUJFUikpIHtcclxuICAgICAgaWYgKChZRUFSX05VTUJFUiAlIDQgPT09IDAgJiYgWUVBUl9OVU1CRVIgJSAxMDAgIT09IDApIHx8IFlFQVJfTlVNQkVSICUgNDAwID09PSAwKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgZWxzZSByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBlbHNlIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFZlcmlmaWNhIHNlIHVtYSBkZXRlcm1pbmFkYSBkYXRhIMOpIGluZGV0ZXJtaW5hZGEuXHJcbiAgICogQHBhcmFtIGRhdGVUaW1lIERhdGEgYSBzZXIgdmVyaWZpY2FkYS5cclxuICAgKiBAcmV0dXJucyBSZXRvcm5hIHRydWUgc2UgZm9yIGluZGV0ZXJtaW5hZGEgZSBmYWxzZSBzZSBuw6NvIGZvci5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIHZlcmlmeURhdGVJc0luZGV0ZXJtaW5hdGUoZGF0ZVRpbWU6IERhdGUpOiBib29sZWFuIHtcclxuICAgIHJldHVybiBkYXRlVGltZS50b1N0cmluZygpLnNwbGl0KCdUJylbMF0gPT09ICcyMDk5LTEyLTMxJztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFZlcmlmaWNhIHNlIHVtYSBkZXRlcm1pbmFkYSBkYXRhIMOpIG51bGEgKGlndWFsIGEgJzE5MDAtMDEtMDFUMDA6MDA6MDAnKS5cclxuICAgKiBAcGFyYW0gZGF0ZVRpbWUgRGF0YSBhIHNlciB2ZXJpZmljYWRhLlxyXG4gICAqIEByZXR1cm5zIFJldG9ybmEgdHJ1ZSBzZSBmb3IgbnVsYSBlIGZhbHNlIHNlIG7Do28gZm9yLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgdmVyaWZ5RGF0ZUlzTnVsbChkYXRlVGltZTogRGF0ZSk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIGRhdGVUaW1lLnRvU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSA9PT0gJzE5MDAtMDEtMDEnO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGVudGEgcmVhbGl6YXIgdW0gcGFyc2UgZGUgdW1hIGRhdGEgY29tIG9zIHNlZ3VpbnRlcyB2YWxvcmVzOiBkZC9NTS95eXl5IEhIOm1tXHJcbiAgICogXHJcbiAgICogQHBhcmFtIHZhbHVlIFN0cmluZyBxdWUgY29udMOpbSBhIGRhdGEgZm9ybWF0YWRhIGVtIHB0LWJyXHJcbiAgICogQHBhcmFtIGRhdGVTZXBhcmF0b3IgU2VwYXJhZG9yIGRhIGRhdGEuXHJcbiAgICogQHJldHVybnMgXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBwYXJzZURhdGVUaW1lKHZhbHVlOiBzdHJpbmcsIGRhdGVTZXBhcmF0b3I6IHN0cmluZyA9IFwiL1wiKTogRGF0ZSB8IHVuZGVmaW5lZCB7XHJcbiAgICBsZXQgdXNEYXRlID0gXCJcIjtcclxuXHJcbiAgICB2YWx1ZSA9IHZhbHVlLnRyaW0oKTtcclxuXHJcbiAgICBsZXQgZGF0ZUFuZFRpbWU6IHN0cmluZ1tdID0gdmFsdWUuc3BsaXQoXCIgXCIpO1xyXG5cclxuICAgIC8vIFBvc3N1aSBwZWxvIG1lbm9zIDUgY2FyYWN0ZXJlczogMS8xLzFcclxuICAgIGlmICh2YWx1ZS5sZW5ndGggPj0gNSkge1xyXG4gICAgICBsZXQgZGF0ZVNlcGFyYXRlZDogc3RyaW5nW10gPSBkYXRlQW5kVGltZVswXS5zcGxpdChkYXRlU2VwYXJhdG9yKTtcclxuXHJcbiAgICAgIGlmIChkYXRlU2VwYXJhdGVkLmxlbmd0aCAhPT0gMykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGRhdGVTZXBhcmF0ZWRbMl0ubGVuZ3RoID4gMikge1xyXG4gICAgICAgIGRhdGVTZXBhcmF0ZWRbMl0gPSBgJHtkYXRlU2VwYXJhdGVkWzJdLmNoYXJBdCgwKX0ke2RhdGVTZXBhcmF0ZWRbMl0uY2hhckF0KDEpfWAudHJpbSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB1c0RhdGUgPSBgJHtkYXRlU2VwYXJhdGVkWzFdfS8ke2RhdGVTZXBhcmF0ZWRbMF19LyR7ZGF0ZVNlcGFyYXRlZFsyXX1gXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRhdGVBbmRUaW1lLmxlbmd0aCA9PT0gMikge1xyXG5cclxuICAgICAgdXNEYXRlICs9IGAgJHtkYXRlQW5kVGltZVsxXX1gO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBleHBlY3RlZERhdGU6IG51bWJlciA9IERhdGUucGFyc2UodXNEYXRlKTtcclxuXHJcbiAgICBpZiAoZXhwZWN0ZWREYXRlICE9PSBudWxsIHx8IGV4cGVjdGVkRGF0ZSA8IDApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBuZXcgRGF0ZShleHBlY3RlZERhdGUpO1xyXG4gIH1cclxuXHJcbiAgLy8gT2J0w6ltIGEgRGF0YSBsb2NhbFxyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0RGF0ZUxvY2FsVGltZShkYXRlOiBEYXRlKTogRGF0ZSB7XHJcbiAgICByZXR1cm4gKG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpIC0gZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpICogNjAwMDApKTtcclxuICB9XHJcblxyXG4gIC8vIE9idMOpbSBhIERhdGEgbG9jYWwgbm8gUGFkcsOjbyBJc29cclxuICBwdWJsaWMgc3RhdGljIGdldERhdGVMb2NhbFRpbWVJU08oZGF0ZTogRGF0ZSk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gKHRoaXMuZ2V0RGF0ZUxvY2FsVGltZShkYXRlKS50b0lTT1N0cmluZygpLnJlcGxhY2UoJy4wMDBaJywgJycpKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0RGF0ZVBpY2tlckRhdGUoc3RyOiBTdHJpbmcpOiBEYXRlIHtcclxuICAgIGNvbnN0IFtkYXRlQ29tcG9uZW50cywgdGltZUNvbXBvbmVudHNdID0gc3RyLnNwbGl0KCdUJylcclxuICAgIGNvbnN0IFthbm8sIG1lcywgZGlhXSA9IGRhdGVDb21wb25lbnRzLnNwbGl0KCctJyk7XHJcbiAgICBjb25zdCBbaG9yYSwgbWludXRvLCBzZWd1bmRvXSA9IHRpbWVDb21wb25lbnRzLnNwbGl0KCc6Jyk7XHJcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoTnVtYmVyKGFubyksIE51bWJlcihtZXMpLCBOdW1iZXIoZGlhKSlcclxuXHJcbiAgICByZXR1cm4gZGF0ZVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBBZGljaW9uYURpYXMoZGF0YTogRGF0ZSwgZGF5czogbnVtYmVyKTogRGF0ZSB7XHJcbiAgICBjb25zdCBmaW5kID0gbmV3IERhdGUoTnVtYmVyKGRhdGEpKVxyXG5cclxuICAgIGZpbmQuc2V0RGF0ZShkYXRhLmdldERhdGUoKSArIGRheXMpXHJcblxyXG4gICAgcmV0dXJuIGZpbmRcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgRGlmZXJlbmNhRGlhcyhkYXRhSW5pY2lhbDogRGF0ZSwgZGF0YUZpbmFsOiBEYXRlKTogbnVtYmVyIHtcclxuICAgIHZhciBUaW1lID0gZGF0YUZpbmFsLmdldFRpbWUoKSAtIGRhdGFJbmljaWFsLmdldFRpbWUoKTtcclxuXHJcbiAgICByZXR1cm4gVGltZSAvICgxMDAwICogMzYwMCAqIDI0KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgRGlmZXJlbmNhTWVzZXMoZGF0YUluaWNpYWw6IERhdGUsIGRhdGFGaW5hbDogRGF0ZSk6IG51bWJlciB7XHJcbiAgICB2YXIgbWVzZXMgPSAoZGF0YUZpbmFsLmdldEZ1bGxZZWFyKCkgLSBkYXRhSW5pY2lhbC5nZXRGdWxsWWVhcigpKSAqIDEyO1xyXG4gICAgbWVzZXMgLT0gZGF0YUluaWNpYWwuZ2V0TW9udGgoKTtcclxuICAgIG1lc2VzICs9IGRhdGFGaW5hbC5nZXRNb250aCgpO1xyXG5cclxuICAgIHJldHVybiBtZXNlcyA8PSAwID8gMCA6IG1lc2VzO1xyXG4gIH1cclxuXHJcblxyXG4gIC8vT2J0w6ltIGEgRGF0YSBVVEMgY29tIGhvcmEgemVyYWRhXHJcbiAgcHVibGljIHN0YXRpYyBnZXREYXRlVVRDKGRhdGU6IERhdGUpOiBEYXRlIHtcclxuICAgIC8vY29kaWdvIG9yaWdpbmFsXHJcbiAgICAvL3JldHVybiBuZXcgRGF0ZShkYXRlLmdldFRpbWUoKSArIChkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDAwMCkpO1xyXG4gICAgbGV0IGRhdGFTYWlkYTogRGF0ZTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBkYXRhU2FpZGEgPSBuZXcgRGF0ZShkYXRlLmdldFVUQ0Z1bGxZZWFyKCksIGRhdGUuZ2V0VVRDTW9udGgoKSwgZGF0ZS5nZXRVVENEYXRlKCksIDAsIDAsIDApO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIC8vUXVhbmRvIGRhdGUgY2hlZ2EgbmVzdGUgZm9ybWF0bzogMjAyMi0wNi0yMFQwMDowMDowMFxyXG4gICAgICAvL3RlbnRvIHBlZ2FyIGFuby9tZXMvZGlhIGRpcmV0byBcclxuICAgICAgLy9EYXRlKER0SW5pRmVyLmdldFVUQ0Z1bGxZZWFyKCksIER0SW5pRmVyLmdldFVUQ01vbnRoKCksIER0SW5pRmVyLmdldFVUQ0RhdGUoKSwgMCAsIDAgLCAwKTtcclxuICAgICAgLy9lIG7Do28gZnVuY2lvbmFcclxuICAgICAgY29uc3QgZGlhOiBzdHJpbmcgPSBkYXRlLnRvU3RyaW5nKCkuc3Vic3RyaW5nKDgsIDEwKTtcclxuICAgICAgY29uc3QgbWVzOiBzdHJpbmcgPSBkYXRlLnRvU3RyaW5nKCkuc3Vic3RyaW5nKDUsIDcpO1xyXG4gICAgICBjb25zdCBhbm86IHN0cmluZyA9IGRhdGUudG9TdHJpbmcoKS5zdWJzdHJpbmcoMCwgNCk7XHJcbiAgICAgIGRhdGFTYWlkYSA9IG5ldyBEYXRlKE51bWJlcihhbm8pLCBOdW1iZXIobWVzKSAtIDEsIE51bWJlcihkaWEpLCAwLCAwLCAwKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGF0YVNhaWRhO1xyXG4gIH1cclxuXHJcbiAgLy9PYnTDqW0gYSBEYXRhIFVUQyBjb20gaG9yYSB6ZXJhZGFcclxuICBwdWJsaWMgc3RhdGljIGdldERhdGVkZE1NeXl5KGRhdGU6IERhdGUpOiBzdHJpbmcge1xyXG4gICAgLy9jb2RpZ28gb3JpZ2luYWxcclxuICAgIC8vcmV0dXJuIG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpICsgKGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKSAqIDYwMDAwKSk7XHJcbiAgICBsZXQgZGF0YVNhaWRhOiBEYXRlO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGRhdGFTYWlkYSA9IG5ldyBEYXRlKGRhdGUuZ2V0VVRDRnVsbFllYXIoKSwgZGF0ZS5nZXRVVENNb250aCgpLCBkYXRlLmdldFVUQ0RhdGUoKSwgMCwgMCwgMCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgLy9RdWFuZG8gZGF0ZSBjaGVnYSBuZXN0ZSBmb3JtYXRvOiAyMDIyLTA2LTIwVDAwOjAwOjAwXHJcbiAgICAgIC8vdGVudG8gcGVnYXIgYW5vL21lcy9kaWEgZGlyZXRvIFxyXG4gICAgICAvL0RhdGUoRHRJbmlGZXIuZ2V0VVRDRnVsbFllYXIoKSwgRHRJbmlGZXIuZ2V0VVRDTW9udGgoKSwgRHRJbmlGZXIuZ2V0VVRDRGF0ZSgpLCAwICwgMCAsIDApO1xyXG4gICAgICAvL2UgbsOjbyBmdW5jaW9uYVxyXG4gICAgICBjb25zdCBkaWE6IHN0cmluZyA9IGRhdGUudG9TdHJpbmcoKS5zdWJzdHJpbmcoOCwgMTApO1xyXG4gICAgICBjb25zdCBtZXM6IHN0cmluZyA9IGRhdGUudG9TdHJpbmcoKS5zdWJzdHJpbmcoNSwgNyk7XHJcbiAgICAgIGNvbnN0IGFubzogc3RyaW5nID0gZGF0ZS50b1N0cmluZygpLnN1YnN0cmluZygwLCA0KTtcclxuXHJcbiAgICAgIGRhdGFTYWlkYSA9IG5ldyBEYXRlKE51bWJlcihhbm8pLCBOdW1iZXIobWVzKSAtIDEsIE51bWJlcihkaWEpLCAwLCAwLCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBwYWQoczogYW55KSB7IHJldHVybiAocyA8IDEwKSA/ICcwJyArIHMgOiBzOyB9XHJcblxyXG4gICAgcmV0dXJuIFtwYWQoZGF0YVNhaWRhLmdldFVUQ0RhdGUoKSksIHBhZChkYXRhU2FpZGEuZ2V0VVRDTW9udGgoKSArIDEpLCBwYWQoZGF0YVNhaWRhLmdldFVUQ0Z1bGxZZWFyKCkpXS5qb2luKCcvJyk7XHJcbiAgfVxyXG5cclxuICAvL09idMOpbSBhIERhdGEgVVRDIGNvbSBhIGhvcmFcclxuICBwdWJsaWMgc3RhdGljIGdldERhdGVkZE1NeXl5eUhobW1zcyhkYXRlOiBEYXRlKTogc3RyaW5nIHtcclxuICAgIGxldCBkYXRhU2FpZGE6IERhdGU7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgZGF0YVNhaWRhID0gbmV3IERhdGUoZGF0ZS5nZXRVVENGdWxsWWVhcigpLCBkYXRlLmdldFVUQ01vbnRoKCksIGRhdGUuZ2V0VVRDRGF0ZSgpLCBkYXRlLmdldEhvdXJzKCksIGRhdGUuZ2V0TWludXRlcygpLCBkYXRlLmdldFNlY29uZHMoKSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgLy9RdWFuZG8gZGF0ZSBjaGVnYSBuZXN0ZSBmb3JtYXRvOiAyMDIyLTA2LTIwVDAwOjAwOjAwXHJcbiAgICAgIC8vdGVudG8gcGVnYXIgYW5vL21lcy9kaWEgZGlyZXRvIFxyXG4gICAgICAvL0RhdGUoRHRJbmlGZXIuZ2V0VVRDRnVsbFllYXIoKSwgRHRJbmlGZXIuZ2V0VVRDTW9udGgoKSwgRHRJbmlGZXIuZ2V0VVRDRGF0ZSgpLCAwICwgMCAsIDApO1xyXG4gICAgICAvL2UgbsOjbyBmdW5jaW9uYVxyXG4gICAgICBjb25zdCBkaWE6IHN0cmluZyA9IGRhdGUudG9TdHJpbmcoKS5zdWJzdHJpbmcoOCwgMTApO1xyXG4gICAgICBjb25zdCBtZXM6IHN0cmluZyA9IGRhdGUudG9TdHJpbmcoKS5zdWJzdHJpbmcoNSwgNyk7XHJcbiAgICAgIGNvbnN0IGFubzogc3RyaW5nID0gZGF0ZS50b1N0cmluZygpLnN1YnN0cmluZygwLCA0KTtcclxuICAgICAgY29uc3QgaG9yYTogc3RyaW5nID0gZGF0ZS50b1N0cmluZygpLnN1YnN0cmluZygxMSwgMTMpO1xyXG4gICAgICBjb25zdCBtaW51dG9zOiBzdHJpbmcgPSBkYXRlLnRvU3RyaW5nKCkuc3Vic3RyaW5nKDE0LCAxNik7XHJcbiAgICAgIGNvbnN0IHNlZ3VuZG9zOiBzdHJpbmcgPSBkYXRlLnRvU3RyaW5nKCkuc3Vic3RyaW5nKDE3LCAxOSk7XHJcblxyXG4gICAgICBkYXRhU2FpZGEgPSBuZXcgRGF0ZShOdW1iZXIoYW5vKSwgTnVtYmVyKG1lcykgLSAxLCBOdW1iZXIoZGlhKSwgTnVtYmVyKGhvcmEpLCBOdW1iZXIobWludXRvcyksIE51bWJlcihzZWd1bmRvcykpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHBhZChzOiBhbnkpIHsgcmV0dXJuIChzIDwgMTApID8gJzAnICsgcyA6IHM7IH1cclxuXHJcbiAgICBsZXQgZGF0YUZvcm1hdGFkYTogc3RyaW5nID0gW3BhZChkYXRhU2FpZGEuZ2V0RGF0ZSgpKSwgcGFkKGRhdGFTYWlkYS5nZXRVVENNb250aCgpICsgMSksIHBhZChkYXRhU2FpZGEuZ2V0VVRDRnVsbFllYXIoKSldLmpvaW4oJy8nKTtcclxuXHJcbiAgICBkYXRhRm9ybWF0YWRhICs9IFwiIFwiO1xyXG4gICAgZGF0YUZvcm1hdGFkYSArPSBbcGFkKGRhdGFTYWlkYS5nZXRIb3VycygpKSwgcGFkKGRhdGFTYWlkYS5nZXRNaW51dGVzKCkpLCBwYWQoZGF0YVNhaWRhLmdldFNlY29uZHMoKSldLmpvaW4oJzonKTtcclxuXHJcbiAgICByZXR1cm4gZGF0YUZvcm1hdGFkYTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBVbHRpbW9EaWFNZXMoZGF0YTogRGF0ZSk6IERhdGUge1xyXG4gICAgbGV0IGRhdGFTYWlkYTogRGF0ZSA9IHRoaXMuZ2V0RGF0ZVRpbWVVVEMoZGF0YSk7XHJcbiAgICAvLyBhZGljaW9uYSAxIG1lc1xyXG4gICAgZGF0YVNhaWRhLnNldE1vbnRoKGRhdGFTYWlkYS5nZXRVVENNb250aCgpICsgMSk7XHJcbiAgICAvL1Bvc2ljaW9uYSBubyBkaWEgMDEgZG8gbWVzIGFkaWNpb25hZG9cclxuICAgIGRhdGFTYWlkYSA9IG5ldyBEYXRlKGRhdGFTYWlkYS5nZXRVVENGdWxsWWVhcigpLCBkYXRhU2FpZGEuZ2V0VVRDTW9udGgoKSwgMSwgMCwgMCwgMCk7XHJcbiAgICAvLyBzdWJ0cmFpIDEgZGlhIHBhcmEgaXIgcGFyYSBvIHVsdGltbyBkaWEgZG8gbWVzXHJcbiAgICBkYXRhU2FpZGEuc2V0RGF0ZShkYXRhU2FpZGEuZ2V0RGF0ZSgpIC0gMSk7XHJcblxyXG4gICAgcmV0dXJuIGRhdGFTYWlkYTtcclxuICB9XHJcblxyXG4gIC8vT2J0w6ltIGEgRGF0YS9ob3JhIFVUQ1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0RGF0ZVRpbWVVVEMoZGF0ZTogRGF0ZSk6IERhdGUge1xyXG4gICAgbGV0IGRhdGFTYWlkYTogRGF0ZTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBkYXRhU2FpZGEgPSBuZXcgRGF0ZShkYXRlLmdldFVUQ0Z1bGxZZWFyKCksIGRhdGUuZ2V0VVRDTW9udGgoKSwgZGF0ZS5nZXRVVENEYXRlKCksIGRhdGUuZ2V0SG91cnMoKSwgZGF0ZS5nZXRNaW51dGVzKCksIGRhdGUuZ2V0U2Vjb25kcygpKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAvL1F1YW5kbyBkYXRlIGNoZWdhIG5lc3RlIGZvcm1hdG86IDIwMjItMDYtMjBUMTE6MTI6MTNcclxuICAgICAgY29uc3QgZGlhOiBzdHJpbmcgPSBkYXRlLnRvU3RyaW5nKCkuc3Vic3RyaW5nKDgsIDEwKTtcclxuICAgICAgY29uc3QgbWVzOiBzdHJpbmcgPSBkYXRlLnRvU3RyaW5nKCkuc3Vic3RyaW5nKDUsIDcpO1xyXG4gICAgICBjb25zdCBhbm86IHN0cmluZyA9IGRhdGUudG9TdHJpbmcoKS5zdWJzdHJpbmcoMCwgNCk7XHJcbiAgICAgIGNvbnN0IGhvcmE6IHN0cmluZyA9IGRhdGUudG9TdHJpbmcoKS5zdWJzdHJpbmcoMTEsIDEzKTtcclxuICAgICAgY29uc3QgbWluOiBzdHJpbmcgPSBkYXRlLnRvU3RyaW5nKCkuc3Vic3RyaW5nKDE0LCAxNik7XHJcbiAgICAgIGNvbnN0IHNlZzogc3RyaW5nID0gZGF0ZS50b1N0cmluZygpLnN1YnN0cmluZygxNywgMTkpO1xyXG4gICAgICBkYXRhU2FpZGEgPSBuZXcgRGF0ZShOdW1iZXIoYW5vKSwgTnVtYmVyKG1lcykgLSAxLCBOdW1iZXIoZGlhKSwgTnVtYmVyKGhvcmEpLCBOdW1iZXIobWluKSwgTnVtYmVyKHNlZykpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkYXRhU2FpZGE7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGNvbXBhcmVFcXVhbERhdGVzKGRhdGUxOiBEYXRlLCBkYXRlMjogRGF0ZSk6IGJvb2xlYW4ge1xyXG4gICAgbGV0IHN0ckRhdGUxOiBzdHJpbmcgPSBVdGlscy5nZXREYXRlZGRNTXl5eShkYXRlMSk7XHJcbiAgICBsZXQgc3RyRGF0ZTI6IHN0cmluZyA9IFV0aWxzLmdldERhdGVkZE1NeXl5KGRhdGUyKTtcclxuXHJcbiAgICBpZiAoc3RyRGF0ZTEgPT09IHN0ckRhdGUyKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBjb252ZXJ0TU1ZWVlZVG9EYXRlKHZhbHVlOiBzdHJpbmcpOiBEYXRlIHtcclxuICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgnLycsICcnKTtcclxuXHJcbiAgICBsZXQgbW9udGg6IG51bWJlciA9IE51bWJlcih2YWx1ZS5zdWJzdHJpbmcoMCwgMikpO1xyXG4gICAgbGV0IHllYXI6IG51bWJlciA9IE51bWJlcih2YWx1ZS5zdWJzdHJpbmcoMiwgNikpO1xyXG5cclxuICAgIC8vRGltaW51aSAxIHBvaXMgbm8gYW5ndWxhciBleGlzdGUgdW0gw61uZGljZSBkbyBtw6pzIHF1ZSBuw6NvIMOpIGlndWFsIGFvIG3DqnMuXHJcbiAgICBtb250aCA9IG1vbnRoIC0gMTtcclxuXHJcbiAgICByZXR1cm4gbmV3IERhdGUoeWVhciwgbW9udGgsIDEpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBnZXROdWxsRGF0ZSgpOiBEYXRlIHtcclxuICAgIHJldHVybiBuZXcgRGF0ZSgxOTAwLCAwLCAxLCAwLCAwLCAwKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0RGF0ZVdlYlNlcnZpY2VGb3JtYXQodmFsdWU6IERhdGUpOiBzdHJpbmcge1xyXG5cclxuICAgIGlmICh2YWx1ZS50b1N0cmluZygpID09ICcnKSB7XHJcbiAgICAgIHJldHVybiAnMTkwMC0wMS0wMSc7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGRhdGEgPSBVdGlscy5nZXREYXRlZGRNTXl5eSh2YWx1ZSk7XHJcblxyXG4gICAgcmV0dXJuIGRhdGEuc3Vic3RyaW5nKDYsIDEwKSArICctJyArIGRhdGEuc3Vic3RyaW5nKDMsIDUpICsgJy0nICsgZGF0YS5zdWJzdHJpbmcoMCwgMik7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGdldERhdGVUaW1lV2ViU2VydmljZUZvcm1hdCh2YWx1ZTogRGF0ZSk6IHN0cmluZyB7XHJcbiAgICBpZiAodmFsdWUudG9TdHJpbmcoKSA9PSAnJyB8fCBVdGlscy5nZXREYXRlZGRNTXl5eSh2YWx1ZSkgPT0gVXRpbHMuZ2V0RGF0ZWRkTU15eXkodGhpcy5nZXROdWxsRGF0ZSgpKSkge1xyXG4gICAgICAgIHJldHVybiAnMTkwMC0wMS0wMVQwMDowMDowMCc7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodmFsdWUpO1xyXG4gIFxyXG4gICAgLy8gT2J0ZW5kbyBvcyBjb21wb25lbnRlcyBpbmRpdmlkdWFpcyBkYSBkYXRhXHJcbiAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgY29uc3QgbW9udGggPSBkYXRlLmdldE1vbnRoKCk7XHJcbiAgICBjb25zdCBkYXkgPSBkYXRlLmdldERhdGUoKTtcclxuICAgIGNvbnN0IGhvdXJzID0gZGF0ZS5nZXRIb3VycygpO1xyXG4gICAgY29uc3QgbWludXRlcyA9IGRhdGUuZ2V0TWludXRlcygpO1xyXG4gICAgY29uc3Qgc2Vjb25kcyA9IGRhdGUuZ2V0U2Vjb25kcygpOyBcclxuICBcclxuICAgIGNvbnN0IGZvcm1hdHRlZERhdGUgPSBgJHt5ZWFyfS0keyhtb250aCArIDEpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX0tJHtkYXkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfVQke2hvdXJzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX06JHttaW51dGVzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX06JHtzZWNvbmRzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gO1xyXG4gICAgXHJcbiAgICByZXR1cm4gZm9ybWF0dGVkRGF0ZTtcclxuICB9XHJcblxyXG4gIC8vVHJhbnNmb3JtYSBhIHN0cmluZyBCYXNlNjQgbnVtIGFycmF5IGRlIGJ5dGVzIGUgZmF6IG8gZG93bmxvYWQgZG8gYXJxdWl2by5cclxuICBwdWJsaWMgc3RhdGljIGRvd25sb2FkRmlsZUJhc2U2NChmbGVOYW1lOiBzdHJpbmcsIGZpbGU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgY29uc3QgYnl0ZVN0cmluZyA9IHdpbmRvdy5hdG9iKGZpbGUpO1xyXG4gICAgY29uc3QgYXJyYXlCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoYnl0ZVN0cmluZy5sZW5ndGgpO1xyXG4gICAgY29uc3QgaW50OEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIpO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnl0ZVN0cmluZy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpbnQ4QXJyYXlbaV0gPSBieXRlU3RyaW5nLmNoYXJDb2RlQXQoaSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtpbnQ4QXJyYXldKTtcclxuXHJcbiAgICBjb25zdCB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcclxuXHJcbiAgICAvL0FiaW9cclxuICAgIC8vTyB3aW5kb3cub3BlbiBmb2kgY29tZW50YWRvIHBvcnF1ZSBubyBkb3dubG9hZCBkb3MgYXJxdWl2b3MgZGlnaXRhaXMgYWJyaWEgdW1hIGphbmVsYSBjb20gbyBibG9iIGRvIGFycXVpdm8uIFxyXG4gICAgLy9Db21lbnRhciBuw6NvIGFmZXRvdSBvIGRvd25sb2FkIGRvIGNvbnRyYS1jaGVxdWUuICBcclxuICAgIC8vd2luZG93Lm9wZW4odXJsKTtcclxuICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG5cclxuICAgIGEuaHJlZiA9IHVybDtcclxuICAgIGEudGFyZ2V0ID0gJ19ibGFuayc7XHJcbiAgICBhLmRvd25sb2FkID0gZmxlTmFtZTtcclxuXHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpO1xyXG5cclxuICAgIGEuY2xpY2soKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICogQWJyZSBvIHBvcHVwIGRvIG5hdmVnYWRvciBwYXJhIGJhaXhhciB1bSBhcnF1aXZvIHF1ZSB2ZWlvIGRlIHVtIGJsb2IuXHJcbiAgKiBcclxuICAqIEBwYXJhbSBibG9iIENvbnRlw7pkbyBkbyBhcnF1aXZvIGJpbsOhcmlvIGEgc2VyIGJhaXhhZG8uXHJcbiAgKiBAcGFyYW0gZmlsZU5hbWUgTm9tZSBkbyBhcnF1aXZvIGEgc2VyIHNhbHZvLlxyXG4gICovXHJcbiAgcHVibGljIHN0YXRpYyBkb3dubG9hZEZpbGUoYmxvYjogQmxvYiwgZmlsZU5hbWU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgY29uc3QgYW5jaG9yID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuXHJcbiAgICBhbmNob3IuaHJlZiA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG4gICAgYW5jaG9yLmRvd25sb2FkID0gZmlsZU5hbWU7XHJcblxyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhbmNob3IpO1xyXG5cclxuICAgIGFuY2hvci5jbGljaygpO1xyXG5cclxuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYW5jaG9yKTtcclxuICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKGFuY2hvci5ocmVmKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYjY0RGVjb2RlVW5pY29kZShzdHI6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAvLyBHb2luZyBiYWNrd2FyZHM6IGZyb20gYnl0ZXN0cmVhbSwgdG8gcGVyY2VudC1lbmNvZGluZywgdG8gb3JpZ2luYWwgc3RyaW5nLlxyXG4gICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChhdG9iKHN0cikuc3BsaXQoJycpLm1hcChjID0+IHtcclxuICAgICAgcmV0dXJuICclJyArICgnMDAnICsgYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpO1xyXG4gICAgfSkuam9pbignJykpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBiNjRFbmNvZGVVbmljb2RlKHN0cjogc3RyaW5nKSB7XHJcbiAgICAvLyBmaXJzdCB3ZSB1c2UgZW5jb2RlVVJJQ29tcG9uZW50IHRvIGdldCBwZXJjZW50LWVuY29kZWQgVVRGLTgsXHJcbiAgICAvLyB0aGVuIHdlIGNvbnZlcnQgdGhlIHBlcmNlbnQgZW5jb2RpbmdzIGludG8gcmF3IGJ5dGVzIHdoaWNoXHJcbiAgICAvLyBjYW4gYmUgZmVkIGludG8gYnRvYS5cclxuICAgIHJldHVybiBidG9hKGVuY29kZVVSSUNvbXBvbmVudChzdHIpLnJlcGxhY2UoLyUoWzAtOUEtRl17Mn0pL2csXHJcbiAgICAgIChtYXRjaCwgcDEpID0+IHtcclxuICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSgoXCIweFwiICsgcDEpIGFzIGFueSk7XHJcbiAgICAgIH0pKTtcclxuICB9XHJcblxyXG4gIC8vTGFyZ3VyYSBhIHBhcnRpciBkZSBvbmRlIHJlbW9udGEgbyBuZ3hfZGF0YXRhYmxlIHBhcmEgbW9iaWxlXHJcbiAgcHVibGljIHN0YXRpYyBnZXRJc01vYmlsZSgpIHtcclxuICAgIGNvbnN0IHdpZHRoID0gd2luZG93LmlubmVyV2lkdGggfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIHx8IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGg7XHJcbiAgICByZXR1cm4gd2lkdGggPCA3Njg7XHJcbiAgfVxyXG5cclxufVxyXG4iXX0=
export class Utils {
    // Obtém a mensagem de erro de uma requisição http
    static getHttpErrorMessage(error) {
        let errorMessage = '';
        if (error.error instanceof ErrorEvent) {
            // Erro ocorreu no lado do client
            errorMessage = error.error.message;
        }
        else {
            // Erro ocorreu no lado do servidor
            if (error.status) {
                if (error.status == 200) {
                    if (error.error) {
                        if (error.error.ErrorMessage) {
                            errorMessage = `${error.error.ErrorMessage}`;
                        }
                        else {
                            errorMessage = `${error.error.Message}`;
                        }
                    }
                    else {
                        errorMessage = error.message;
                    }
                }
                else {
                    if (error.error) {
                        if (error.error.ErrorMessage) {
                            errorMessage = `${error.error.ErrorMessage}<br><br>${error.status} - ${error.statusText}`;
                        }
                        else {
                            errorMessage = `${error.error.Message}<br><br>${error.status} - ${error.statusText}`;
                        }
                    }
                    else {
                        errorMessage = error.message;
                    }
                }
            }
            else {
                errorMessage = error.message;
            }
        }
        return errorMessage;
    }
    ;
    static convertDateTimeToDateString(date) {
        const dateString = date.toString().split('T')[0].split('-');
        return `${dateString[0]}-${dateString[1]}-${dateString[2]}`;
    }
    static convertStringToDate(text) {
        const dateString = text.split('-');
        return new Date(+dateString[0], (+dateString[1]) - 1, +dateString[2]);
    }
    /**
     * Verifica se um determinado ano é bissexto.
     * @param year Ano a ser verificado.
     * @returns Retorna true se o ano for bissexto e false se ele não for, ou se o ano informado for inválido.
     */
    static isLeapYear(year) {
        const YEAR_NUMBER = typeof year === 'string' ? parseInt(year) : year;
        if (!isNaN(YEAR_NUMBER)) {
            if ((YEAR_NUMBER % 4 === 0 && YEAR_NUMBER % 100 !== 0) || YEAR_NUMBER % 400 === 0)
                return true;
            else
                return false;
        }
        else
            return false;
    }
    /**
     * Verifica se uma determinada data é indeterminada.
     * @param dateTime Data a ser verificada.
     * @returns Retorna true se for indeterminada e false se não for.
     */
    static verifyDateIsIndeterminate(dateTime) {
        return dateTime.toString().split('T')[0] === '2099-12-31';
    }
    /**
     * Verifica se uma determinada data é nula (igual a '1900-01-01T00:00:00').
     * @param dateTime Data a ser verificada.
     * @returns Retorna true se for nula e false se não for.
     */
    static verifyDateIsNull(dateTime) {
        return dateTime.toString().split('T')[0] === '1900-01-01';
    }
    /**
     * Tenta realizar um parse de uma data com os seguintes valores: dd/MM/yyyy HH:mm
     *
     * @param value String que contém a data formatada em pt-br
     * @param dateSeparator Separador da data.
     * @returns
     */
    static parseDateTime(value, dateSeparator = "/") {
        let usDate = "";
        value = value.trim();
        let dateAndTime = value.split(" ");
        // Possui pelo menos 5 caracteres: 1/1/1
        if (value.length >= 5) {
            let dateSeparated = dateAndTime[0].split(dateSeparator);
            if (dateSeparated.length !== 3) {
                return;
            }
            if (dateSeparated[2].length > 2) {
                dateSeparated[2] = `${dateSeparated[2].charAt(0)}${dateSeparated[2].charAt(1)}`.trim();
            }
            usDate = `${dateSeparated[1]}/${dateSeparated[0]}/${dateSeparated[2]}`;
        }
        if (dateAndTime.length === 2) {
            usDate += ` ${dateAndTime[1]}`;
        }
        let expectedDate = Date.parse(usDate);
        if (expectedDate !== null || expectedDate < 0) {
            return;
        }
        return new Date(expectedDate);
    }
    // Obtém a Data local
    static getDateLocalTime(date) {
        return (new Date(date.getTime() - date.getTimezoneOffset() * 60000));
    }
    // Obtém a Data local no Padrão Iso
    static getDateLocalTimeISO(date) {
        return (this.getDateLocalTime(date).toISOString().replace('.000Z', ''));
    }
    static getDatePickerDate(str) {
        const [dateComponents, timeComponents] = str.split('T');
        const [ano, mes, dia] = dateComponents.split('-');
        const [hora, minuto, segundo] = timeComponents.split(':');
        const date = new Date(Number(ano), Number(mes), Number(dia));
        return date;
    }
    static AdicionaDias(data, days) {
        const find = new Date(Number(data));
        find.setDate(data.getDate() + days);
        return find;
    }
    static DiferencaDias(dataInicial, dataFinal) {
        var Time = dataFinal.getTime() - dataInicial.getTime();
        return Time / (1000 * 3600 * 24);
    }
    static DiferencaMeses(dataInicial, dataFinal) {
        var meses = (dataFinal.getFullYear() - dataInicial.getFullYear()) * 12;
        meses -= dataInicial.getMonth();
        meses += dataFinal.getMonth();
        return meses <= 0 ? 0 : meses;
    }
    //Obtém a Data UTC com hora zerada
    static getDateUTC(date) {
        //codigo original
        //return new Date(date.getTime() + (date.getTimezoneOffset() * 60000));
        let dataSaida;
        try {
            dataSaida = new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), 0, 0, 0);
        }
        catch (error) {
            //Quando date chega neste formato: 2022-06-20T00:00:00
            //tento pegar ano/mes/dia direto 
            //Date(DtIniFer.getUTCFullYear(), DtIniFer.getUTCMonth(), DtIniFer.getUTCDate(), 0 , 0 , 0);
            //e não funciona
            const dia = date.toString().substring(8, 10);
            const mes = date.toString().substring(5, 7);
            const ano = date.toString().substring(0, 4);
            dataSaida = new Date(Number(ano), Number(mes) - 1, Number(dia), 0, 0, 0);
        }
        return dataSaida;
    }
    //Obtém a Data UTC com hora zerada
    static getDateddMMyyy(date) {
        //codigo original
        //return new Date(date.getTime() + (date.getTimezoneOffset() * 60000));
        let dataSaida;
        try {
            dataSaida = new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), 0, 0, 0);
        }
        catch (error) {
            //Quando date chega neste formato: 2022-06-20T00:00:00
            //tento pegar ano/mes/dia direto 
            //Date(DtIniFer.getUTCFullYear(), DtIniFer.getUTCMonth(), DtIniFer.getUTCDate(), 0 , 0 , 0);
            //e não funciona
            const dia = date.toString().substring(8, 10);
            const mes = date.toString().substring(5, 7);
            const ano = date.toString().substring(0, 4);
            dataSaida = new Date(Number(ano), Number(mes) - 1, Number(dia), 0, 0, 0);
        }
        function pad(s) { return (s < 10) ? '0' + s : s; }
        return [pad(dataSaida.getUTCDate()), pad(dataSaida.getUTCMonth() + 1), pad(dataSaida.getUTCFullYear())].join('/');
    }
    //Obtém a Data UTC com a hora
    static getDateddMMyyyyHhmmss(date) {
        let dataSaida;
        try {
            dataSaida = new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getHours(), date.getMinutes(), date.getSeconds());
        }
        catch (error) {
            //Quando date chega neste formato: 2022-06-20T00:00:00
            //tento pegar ano/mes/dia direto 
            //Date(DtIniFer.getUTCFullYear(), DtIniFer.getUTCMonth(), DtIniFer.getUTCDate(), 0 , 0 , 0);
            //e não funciona
            const dia = date.toString().substring(8, 10);
            const mes = date.toString().substring(5, 7);
            const ano = date.toString().substring(0, 4);
            const hora = date.toString().substring(11, 13);
            const minutos = date.toString().substring(14, 16);
            const segundos = date.toString().substring(17, 19);
            dataSaida = new Date(Number(ano), Number(mes) - 1, Number(dia), Number(hora), Number(minutos), Number(segundos));
        }
        function pad(s) { return (s < 10) ? '0' + s : s; }
        let dataFormatada = [pad(dataSaida.getDate()), pad(dataSaida.getUTCMonth() + 1), pad(dataSaida.getUTCFullYear())].join('/');
        dataFormatada += " ";
        dataFormatada += [pad(dataSaida.getHours()), pad(dataSaida.getMinutes()), pad(dataSaida.getSeconds())].join(':');
        return dataFormatada;
    }
    static UltimoDiaMes(data) {
        let dataSaida = this.getDateTimeUTC(data);
        // adiciona 1 mes
        dataSaida.setMonth(dataSaida.getUTCMonth() + 1);
        //Posiciona no dia 01 do mes adicionado
        dataSaida = new Date(dataSaida.getUTCFullYear(), dataSaida.getUTCMonth(), 1, 0, 0, 0);
        // subtrai 1 dia para ir para o ultimo dia do mes
        dataSaida.setDate(dataSaida.getDate() - 1);
        return dataSaida;
    }
    //Obtém a Data/hora UTC
    static getDateTimeUTC(date) {
        let dataSaida;
        try {
            dataSaida = new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getHours(), date.getMinutes(), date.getSeconds());
        }
        catch (error) {
            //Quando date chega neste formato: 2022-06-20T11:12:13
            const dia = date.toString().substring(8, 10);
            const mes = date.toString().substring(5, 7);
            const ano = date.toString().substring(0, 4);
            const hora = date.toString().substring(11, 13);
            const min = date.toString().substring(14, 16);
            const seg = date.toString().substring(17, 19);
            dataSaida = new Date(Number(ano), Number(mes) - 1, Number(dia), Number(hora), Number(min), Number(seg));
        }
        return dataSaida;
    }
    static compareEqualDates(date1, date2) {
        let strDate1 = Utils.getDateddMMyyy(date1);
        let strDate2 = Utils.getDateddMMyyy(date2);
        if (strDate1 === strDate2) {
            return true;
        }
        else {
            return false;
        }
    }
    static convertMMYYYYToDate(value) {
        value = value.replace('/', '');
        let month = Number(value.substring(0, 2));
        let year = Number(value.substring(2, 6));
        //Diminui 1 pois no angular existe um índice do mês que não é igual ao mês.
        month = month - 1;
        return new Date(year, month, 1);
    }
    static getNullDate() {
        return new Date(1900, 0, 1, 0, 0, 0);
    }
    static getDateWebServiceFormat(value) {
        if (value.toString() == '') {
            return '1900-01-01';
        }
        let data = Utils.getDateddMMyyy(value);
        return data.substring(6, 10) + '-' + data.substring(3, 5) + '-' + data.substring(0, 2);
    }
    static getDateTimeWebServiceFormat(value) {
        if (value.toString() == '' || Utils.getDateddMMyyy(value) == Utils.getDateddMMyyy(this.getNullDate())) {
            return '1900-01-01T00:00:00';
        }
        const date = new Date(value);
        // Obtendo os componentes individuais da data
        const year = date.getFullYear();
        const month = date.getMonth();
        const day = date.getDate();
        const hours = date.getHours();
        const minutes = date.getMinutes();
        const seconds = date.getSeconds();
        const formattedDate = `${year}-${(month + 1).toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}T${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        return formattedDate;
    }
    //Transforma a string Base64 num array de bytes e faz o download do arquivo.
    static downloadFileBase64(fleName, file) {
        const byteString = window.atob(file);
        const arrayBuffer = new ArrayBuffer(byteString.length);
        const int8Array = new Uint8Array(arrayBuffer);
        for (let i = 0; i < byteString.length; i++) {
            int8Array[i] = byteString.charCodeAt(i);
        }
        const blob = new Blob([int8Array]);
        const url = window.URL.createObjectURL(blob);
        //Abio
        //O window.open foi comentado porque no download dos arquivos digitais abria uma janela com o blob do arquivo. 
        //Comentar não afetou o download do contra-cheque.  
        //window.open(url);
        var a = document.createElement('a');
        a.href = url;
        a.target = '_blank';
        a.download = fleName;
        document.body.appendChild(a);
        a.click();
    }
    /**
    * Abre o popup do navegador para baixar um arquivo que veio de um blob.
    *
    * @param blob Conteúdo do arquivo binário a ser baixado.
    * @param fileName Nome do arquivo a ser salvo.
    */
    static downloadFile(blob, fileName) {
        const anchor = window.document.createElement('a');
        anchor.href = window.URL.createObjectURL(blob);
        anchor.download = fileName;
        document.body.appendChild(anchor);
        anchor.click();
        document.body.removeChild(anchor);
        window.URL.revokeObjectURL(anchor.href);
    }
    static b64DecodeUnicode(str) {
        // Going backwards: from bytestream, to percent-encoding, to original string.
        return decodeURIComponent(atob(str).split('').map(c => {
            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
        }).join(''));
    }
    static b64EncodeUnicode(str) {
        // first we use encodeURIComponent to get percent-encoded UTF-8,
        // then we convert the percent encodings into raw bytes which
        // can be fed into btoa.
        return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (match, p1) => {
            return String.fromCharCode(("0x" + p1));
        }));
    }
    //Largura a partir de onde remonta o ngx_datatable para mobile
    static getIsMobile() {
        const width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
        return width < 768;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3gtc3AtaW5mcmEvc3JjL2xpYi91dGlscy91dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLE9BQU8sS0FBSztJQUVoQixrREFBa0Q7SUFDM0MsTUFBTSxDQUFDLG1CQUFtQixDQUFDLEtBQVU7UUFFMUMsSUFBSSxZQUFZLEdBQVcsRUFBRSxDQUFDO1FBRTlCLElBQUksS0FBSyxDQUFDLEtBQUssWUFBWSxVQUFVLEVBQUUsQ0FBQztZQUN0QyxpQ0FBaUM7WUFDakMsWUFBWSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDO1FBQ3JDLENBQUM7YUFBTSxDQUFDO1lBRU4sbUNBQW1DO1lBQ25DLElBQUksS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDO2dCQUVqQixJQUFJLEtBQUssQ0FBQyxNQUFNLElBQUksR0FBRyxFQUFFLENBQUM7b0JBRXhCLElBQUksS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDO3dCQUVoQixJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFFLENBQUM7NEJBQzdCLFlBQVksR0FBRyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFFLENBQUM7d0JBQy9DLENBQUM7NkJBQ0ksQ0FBQzs0QkFDSixZQUFZLEdBQUcsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO3dCQUMxQyxDQUFDO29CQUVILENBQUM7eUJBQU0sQ0FBQzt3QkFDTixZQUFZLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQztvQkFDL0IsQ0FBQztnQkFFSCxDQUFDO3FCQUNJLENBQUM7b0JBRUosSUFBSSxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7d0JBRWhCLElBQUksS0FBSyxDQUFDLEtBQUssQ0FBQyxZQUFZLEVBQUUsQ0FBQzs0QkFDN0IsWUFBWSxHQUFHLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxZQUFZLFdBQVcsS0FBSyxDQUFDLE1BQU0sTUFBTSxLQUFLLENBQUMsVUFBVSxFQUFFLENBQUM7d0JBQzVGLENBQUM7NkJBQ0ksQ0FBQzs0QkFDSixZQUFZLEdBQUcsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLE9BQU8sV0FBVyxLQUFLLENBQUMsTUFBTSxNQUFNLEtBQUssQ0FBQyxVQUFVLEVBQUUsQ0FBQzt3QkFDdkYsQ0FBQztvQkFFSCxDQUFDO3lCQUFNLENBQUM7d0JBQ04sWUFBWSxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUM7b0JBQy9CLENBQUM7Z0JBRUgsQ0FBQztZQUVILENBQUM7aUJBQU0sQ0FBQztnQkFDTixZQUFZLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQztZQUMvQixDQUFDO1FBRUgsQ0FBQztRQUVELE9BQU8sWUFBWSxDQUFDO0lBQ3RCLENBQUM7SUFBQSxDQUFDO0lBRUssTUFBTSxDQUFDLDJCQUEyQixDQUFDLElBQVU7UUFDbEQsTUFBTSxVQUFVLEdBQWEsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7UUFFdEUsT0FBTyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsSUFBSSxVQUFVLENBQUMsQ0FBQyxDQUFDLElBQUksVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7SUFDOUQsQ0FBQztJQUVNLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxJQUFZO1FBQzVDLE1BQU0sVUFBVSxHQUFhLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7UUFFN0MsT0FBTyxJQUFJLElBQUksQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDeEUsQ0FBQztJQUVEOzs7O09BSUc7SUFDSSxNQUFNLENBQUMsVUFBVSxDQUFDLElBQXFCO1FBQzVDLE1BQU0sV0FBVyxHQUFXLE9BQU8sSUFBSSxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7UUFFN0UsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDO1lBQ3hCLElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLEdBQUcsR0FBRyxLQUFLLENBQUMsQ0FBQyxJQUFJLFdBQVcsR0FBRyxHQUFHLEtBQUssQ0FBQztnQkFBRSxPQUFPLElBQUksQ0FBQzs7Z0JBQzFGLE9BQU8sS0FBSyxDQUFDO1FBQ3BCLENBQUM7O1lBQ0ksT0FBTyxLQUFLLENBQUM7SUFDcEIsQ0FBQztJQUVEOzs7O09BSUc7SUFDSSxNQUFNLENBQUMseUJBQXlCLENBQUMsUUFBYztRQUNwRCxPQUFPLFFBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssWUFBWSxDQUFDO0lBQzVELENBQUM7SUFFRDs7OztPQUlHO0lBQ0ksTUFBTSxDQUFDLGdCQUFnQixDQUFDLFFBQWM7UUFDM0MsT0FBTyxRQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLFlBQVksQ0FBQztJQUM1RCxDQUFDO0lBRUQ7Ozs7OztPQU1HO0lBQ0ksTUFBTSxDQUFDLGFBQWEsQ0FBQyxLQUFhLEVBQUUsZ0JBQXdCLEdBQUc7UUFDcEUsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDO1FBRWhCLEtBQUssR0FBRyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUM7UUFFckIsSUFBSSxXQUFXLEdBQWEsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUU3Qyx3Q0FBd0M7UUFDeEMsSUFBSSxLQUFLLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRSxDQUFDO1lBQ3RCLElBQUksYUFBYSxHQUFhLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUM7WUFFbEUsSUFBSSxhQUFhLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRSxDQUFDO2dCQUMvQixPQUFPO1lBQ1QsQ0FBQztZQUVELElBQUksYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztnQkFDaEMsYUFBYSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDekYsQ0FBQztZQUVELE1BQU0sR0FBRyxHQUFHLGFBQWEsQ0FBQyxDQUFDLENBQUMsSUFBSSxhQUFhLENBQUMsQ0FBQyxDQUFDLElBQUksYUFBYSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUE7UUFDeEUsQ0FBQztRQUVELElBQUksV0FBVyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUUsQ0FBQztZQUU3QixNQUFNLElBQUksSUFBSSxXQUFXLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUNqQyxDQUFDO1FBRUQsSUFBSSxZQUFZLEdBQVcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUU5QyxJQUFJLFlBQVksS0FBSyxJQUFJLElBQUksWUFBWSxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQzlDLE9BQU87UUFDVCxDQUFDO1FBRUQsT0FBTyxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUNoQyxDQUFDO0lBRUQscUJBQXFCO0lBQ2QsTUFBTSxDQUFDLGdCQUFnQixDQUFDLElBQVU7UUFDdkMsT0FBTyxDQUFDLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsR0FBRyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQ3ZFLENBQUM7SUFFRCxtQ0FBbUM7SUFDNUIsTUFBTSxDQUFDLG1CQUFtQixDQUFDLElBQVU7UUFDMUMsT0FBTyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDMUUsQ0FBQztJQUVNLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxHQUFXO1FBQ3pDLE1BQU0sQ0FBQyxjQUFjLEVBQUUsY0FBYyxDQUFDLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUN2RCxNQUFNLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsR0FBRyxjQUFjLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2xELE1BQU0sQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLE9BQU8sQ0FBQyxHQUFHLGNBQWMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDMUQsTUFBTSxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQTtRQUU1RCxPQUFPLElBQUksQ0FBQTtJQUNiLENBQUM7SUFFTSxNQUFNLENBQUMsWUFBWSxDQUFDLElBQVUsRUFBRSxJQUFZO1FBQ2pELE1BQU0sSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFBO1FBRW5DLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFBO1FBRW5DLE9BQU8sSUFBSSxDQUFBO0lBQ2IsQ0FBQztJQUVNLE1BQU0sQ0FBQyxhQUFhLENBQUMsV0FBaUIsRUFBRSxTQUFlO1FBQzVELElBQUksSUFBSSxHQUFHLFNBQVMsQ0FBQyxPQUFPLEVBQUUsR0FBRyxXQUFXLENBQUMsT0FBTyxFQUFFLENBQUM7UUFFdkQsT0FBTyxJQUFJLEdBQUcsQ0FBQyxJQUFJLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ25DLENBQUM7SUFFTSxNQUFNLENBQUMsY0FBYyxDQUFDLFdBQWlCLEVBQUUsU0FBZTtRQUM3RCxJQUFJLEtBQUssR0FBRyxDQUFDLFNBQVMsQ0FBQyxXQUFXLEVBQUUsR0FBRyxXQUFXLENBQUMsV0FBVyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDdkUsS0FBSyxJQUFJLFdBQVcsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUNoQyxLQUFLLElBQUksU0FBUyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBRTlCLE9BQU8sS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7SUFDaEMsQ0FBQztJQUdELGtDQUFrQztJQUMzQixNQUFNLENBQUMsVUFBVSxDQUFDLElBQVU7UUFDakMsaUJBQWlCO1FBQ2pCLHVFQUF1RTtRQUN2RSxJQUFJLFNBQWUsQ0FBQztRQUVwQixJQUFJLENBQUM7WUFDSCxTQUFTLEdBQUcsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBRSxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsRUFBRSxJQUFJLENBQUMsVUFBVSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUM5RixDQUFDO1FBQ0QsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNiLHNEQUFzRDtZQUN0RCxpQ0FBaUM7WUFDakMsNEZBQTRGO1lBQzVGLGdCQUFnQjtZQUNoQixNQUFNLEdBQUcsR0FBVyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUNyRCxNQUFNLEdBQUcsR0FBVyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNwRCxNQUFNLEdBQUcsR0FBVyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNwRCxTQUFTLEdBQUcsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDM0UsQ0FBQztRQUVELE9BQU8sU0FBUyxDQUFDO0lBQ25CLENBQUM7SUFFRCxrQ0FBa0M7SUFDM0IsTUFBTSxDQUFDLGNBQWMsQ0FBQyxJQUFVO1FBQ3JDLGlCQUFpQjtRQUNqQix1RUFBdUU7UUFDdkUsSUFBSSxTQUFlLENBQUM7UUFFcEIsSUFBSSxDQUFDO1lBQ0gsU0FBUyxHQUFHLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUUsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLEVBQUUsSUFBSSxDQUFDLFVBQVUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDOUYsQ0FBQztRQUNELE9BQU8sS0FBSyxFQUFFLENBQUM7WUFDYixzREFBc0Q7WUFDdEQsaUNBQWlDO1lBQ2pDLDRGQUE0RjtZQUM1RixnQkFBZ0I7WUFDaEIsTUFBTSxHQUFHLEdBQVcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDckQsTUFBTSxHQUFHLEdBQVcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDcEQsTUFBTSxHQUFHLEdBQVcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFFcEQsU0FBUyxHQUFHLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQzNFLENBQUM7UUFFRCxTQUFTLEdBQUcsQ0FBQyxDQUFNLElBQUksT0FBTyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUV2RCxPQUFPLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxTQUFTLENBQUMsV0FBVyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLFNBQVMsQ0FBQyxjQUFjLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3BILENBQUM7SUFFRCw2QkFBNkI7SUFDdEIsTUFBTSxDQUFDLHFCQUFxQixDQUFDLElBQVU7UUFDNUMsSUFBSSxTQUFlLENBQUM7UUFFcEIsSUFBSSxDQUFDO1lBQ0gsU0FBUyxHQUFHLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUUsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLEVBQUUsSUFBSSxDQUFDLFVBQVUsRUFBRSxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxJQUFJLENBQUMsVUFBVSxFQUFFLEVBQUUsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUM7UUFDNUksQ0FBQztRQUNELE9BQU8sS0FBSyxFQUFFLENBQUM7WUFDYixzREFBc0Q7WUFDdEQsaUNBQWlDO1lBQ2pDLDRGQUE0RjtZQUM1RixnQkFBZ0I7WUFDaEIsTUFBTSxHQUFHLEdBQVcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDckQsTUFBTSxHQUFHLEdBQVcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDcEQsTUFBTSxHQUFHLEdBQVcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDcEQsTUFBTSxJQUFJLEdBQVcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDdkQsTUFBTSxPQUFPLEdBQVcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDMUQsTUFBTSxRQUFRLEdBQVcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFFM0QsU0FBUyxHQUFHLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQ25ILENBQUM7UUFFRCxTQUFTLEdBQUcsQ0FBQyxDQUFNLElBQUksT0FBTyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUV2RCxJQUFJLGFBQWEsR0FBVyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsU0FBUyxDQUFDLFdBQVcsRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxTQUFTLENBQUMsY0FBYyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUVwSSxhQUFhLElBQUksR0FBRyxDQUFDO1FBQ3JCLGFBQWEsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsU0FBUyxDQUFDLFVBQVUsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLFNBQVMsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRWpILE9BQU8sYUFBYSxDQUFDO0lBQ3ZCLENBQUM7SUFFRCxNQUFNLENBQUMsWUFBWSxDQUFDLElBQVU7UUFDNUIsSUFBSSxTQUFTLEdBQVMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNoRCxpQkFBaUI7UUFDakIsU0FBUyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsV0FBVyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDaEQsdUNBQXVDO1FBQ3ZDLFNBQVMsR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsY0FBYyxFQUFFLEVBQUUsU0FBUyxDQUFDLFdBQVcsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3RGLGlEQUFpRDtRQUNqRCxTQUFTLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxPQUFPLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUUzQyxPQUFPLFNBQVMsQ0FBQztJQUNuQixDQUFDO0lBRUQsdUJBQXVCO0lBQ2hCLE1BQU0sQ0FBQyxjQUFjLENBQUMsSUFBVTtRQUNyQyxJQUFJLFNBQWUsQ0FBQztRQUVwQixJQUFJLENBQUM7WUFDSCxTQUFTLEdBQUcsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBRSxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsRUFBRSxJQUFJLENBQUMsVUFBVSxFQUFFLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxFQUFFLElBQUksQ0FBQyxVQUFVLEVBQUUsRUFBRSxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQztRQUM1SSxDQUFDO1FBQ0QsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNiLHNEQUFzRDtZQUN0RCxNQUFNLEdBQUcsR0FBVyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUNyRCxNQUFNLEdBQUcsR0FBVyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNwRCxNQUFNLEdBQUcsR0FBVyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNwRCxNQUFNLElBQUksR0FBVyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsU0FBUyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUN2RCxNQUFNLEdBQUcsR0FBVyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsU0FBUyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUN0RCxNQUFNLEdBQUcsR0FBVyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsU0FBUyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUN0RCxTQUFTLEdBQUcsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDMUcsQ0FBQztRQUVELE9BQU8sU0FBUyxDQUFDO0lBQ25CLENBQUM7SUFFTSxNQUFNLENBQUMsaUJBQWlCLENBQUMsS0FBVyxFQUFFLEtBQVc7UUFDdEQsSUFBSSxRQUFRLEdBQVcsS0FBSyxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuRCxJQUFJLFFBQVEsR0FBVyxLQUFLLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBRW5ELElBQUksUUFBUSxLQUFLLFFBQVEsRUFBRSxDQUFDO1lBQzFCLE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQzthQUFNLENBQUM7WUFDTixPQUFPLEtBQUssQ0FBQztRQUNmLENBQUM7SUFDSCxDQUFDO0lBRU0sTUFBTSxDQUFDLG1CQUFtQixDQUFDLEtBQWE7UUFDN0MsS0FBSyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBRS9CLElBQUksS0FBSyxHQUFXLE1BQU0sQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2xELElBQUksSUFBSSxHQUFXLE1BQU0sQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRWpELDJFQUEyRTtRQUMzRSxLQUFLLEdBQUcsS0FBSyxHQUFHLENBQUMsQ0FBQztRQUVsQixPQUFPLElBQUksSUFBSSxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDbEMsQ0FBQztJQUVNLE1BQU0sQ0FBQyxXQUFXO1FBQ3ZCLE9BQU8sSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUN2QyxDQUFDO0lBRU0sTUFBTSxDQUFDLHVCQUF1QixDQUFDLEtBQVc7UUFFL0MsSUFBSSxLQUFLLENBQUMsUUFBUSxFQUFFLElBQUksRUFBRSxFQUFFLENBQUM7WUFDM0IsT0FBTyxZQUFZLENBQUM7UUFDdEIsQ0FBQztRQUVELElBQUksSUFBSSxHQUFHLEtBQUssQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFdkMsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3pGLENBQUM7SUFFTSxNQUFNLENBQUMsMkJBQTJCLENBQUMsS0FBVztRQUNuRCxJQUFJLEtBQUssQ0FBQyxRQUFRLEVBQUUsSUFBSSxFQUFFLElBQUksS0FBSyxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsSUFBSSxLQUFLLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDcEcsT0FBTyxxQkFBcUIsQ0FBQztRQUNqQyxDQUFDO1FBRUQsTUFBTSxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFN0IsNkNBQTZDO1FBQzdDLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNoQyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDOUIsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQzNCLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUM5QixNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDbEMsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBRWxDLE1BQU0sYUFBYSxHQUFHLEdBQUcsSUFBSSxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLElBQUksR0FBRyxDQUFDLFFBQVEsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLElBQUksS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLElBQUksT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLElBQUksT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQztRQUVqTyxPQUFPLGFBQWEsQ0FBQztJQUN2QixDQUFDO0lBRUQsNEVBQTRFO0lBQ3JFLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxPQUFlLEVBQUUsSUFBWTtRQUM1RCxNQUFNLFVBQVUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3JDLE1BQU0sV0FBVyxHQUFHLElBQUksV0FBVyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN2RCxNQUFNLFNBQVMsR0FBRyxJQUFJLFVBQVUsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUU5QyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsVUFBVSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQzNDLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFDLENBQUM7UUFFRCxNQUFNLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFFbkMsTUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFN0MsTUFBTTtRQUNOLCtHQUErRztRQUMvRyxvREFBb0Q7UUFDcEQsbUJBQW1CO1FBQ25CLElBQUksQ0FBQyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUM7UUFFcEMsQ0FBQyxDQUFDLElBQUksR0FBRyxHQUFHLENBQUM7UUFDYixDQUFDLENBQUMsTUFBTSxHQUFHLFFBQVEsQ0FBQztRQUNwQixDQUFDLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQztRQUVyQixRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUU3QixDQUFDLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDWixDQUFDO0lBRUQ7Ozs7O01BS0U7SUFDSyxNQUFNLENBQUMsWUFBWSxDQUFDLElBQVUsRUFBRSxRQUFnQjtRQUNyRCxNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUVsRCxNQUFNLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQy9DLE1BQU0sQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO1FBRTNCLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRWxDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUVmLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ2xDLE1BQU0sQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUMxQyxDQUFDO0lBRU0sTUFBTSxDQUFDLGdCQUFnQixDQUFDLEdBQVc7UUFDeEMsNkVBQTZFO1FBQzdFLE9BQU8sa0JBQWtCLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUU7WUFDcEQsT0FBTyxHQUFHLEdBQUcsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMvRCxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNmLENBQUM7SUFFTSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsR0FBVztRQUN4QyxnRUFBZ0U7UUFDaEUsNkRBQTZEO1FBQzdELHdCQUF3QjtRQUN4QixPQUFPLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsaUJBQWlCLEVBQzNELENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFO1lBQ1osT0FBTyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBUSxDQUFDLENBQUM7UUFDakQsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNSLENBQUM7SUFFRCw4REFBOEQ7SUFDdkQsTUFBTSxDQUFDLFdBQVc7UUFDdkIsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLFVBQVUsSUFBSSxRQUFRLENBQUMsZUFBZSxDQUFDLFdBQVcsSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQztRQUNyRyxPQUFPLEtBQUssR0FBRyxHQUFHLENBQUM7SUFDckIsQ0FBQztDQUVGIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFV0aWxzIHtcblxuICAvLyBPYnTDqW0gYSBtZW5zYWdlbSBkZSBlcnJvIGRlIHVtYSByZXF1aXNpw6fDo28gaHR0cFxuICBwdWJsaWMgc3RhdGljIGdldEh0dHBFcnJvck1lc3NhZ2UoZXJyb3I6IGFueSk6IHN0cmluZyB7XG5cbiAgICBsZXQgZXJyb3JNZXNzYWdlOiBzdHJpbmcgPSAnJztcblxuICAgIGlmIChlcnJvci5lcnJvciBpbnN0YW5jZW9mIEVycm9yRXZlbnQpIHtcbiAgICAgIC8vIEVycm8gb2NvcnJldSBubyBsYWRvIGRvIGNsaWVudFxuICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3IuZXJyb3IubWVzc2FnZTtcbiAgICB9IGVsc2Uge1xuXG4gICAgICAvLyBFcnJvIG9jb3JyZXUgbm8gbGFkbyBkbyBzZXJ2aWRvclxuICAgICAgaWYgKGVycm9yLnN0YXR1cykge1xuXG4gICAgICAgIGlmIChlcnJvci5zdGF0dXMgPT0gMjAwKSB7XG5cbiAgICAgICAgICBpZiAoZXJyb3IuZXJyb3IpIHtcblxuICAgICAgICAgICAgaWYgKGVycm9yLmVycm9yLkVycm9yTWVzc2FnZSkge1xuICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBgJHtlcnJvci5lcnJvci5FcnJvck1lc3NhZ2V9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBgJHtlcnJvci5lcnJvci5NZXNzYWdlfWA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcblxuICAgICAgICAgIGlmIChlcnJvci5lcnJvcikge1xuXG4gICAgICAgICAgICBpZiAoZXJyb3IuZXJyb3IuRXJyb3JNZXNzYWdlKSB7XG4gICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGAke2Vycm9yLmVycm9yLkVycm9yTWVzc2FnZX08YnI+PGJyPiR7ZXJyb3Iuc3RhdHVzfSAtICR7ZXJyb3Iuc3RhdHVzVGV4dH1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGAke2Vycm9yLmVycm9yLk1lc3NhZ2V9PGJyPjxicj4ke2Vycm9yLnN0YXR1c30gLSAke2Vycm9yLnN0YXR1c1RleHR9YDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgICAgIH1cblxuICAgICAgICB9XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XG4gICAgICB9XG5cbiAgICB9XG5cbiAgICByZXR1cm4gZXJyb3JNZXNzYWdlO1xuICB9O1xuXG4gIHB1YmxpYyBzdGF0aWMgY29udmVydERhdGVUaW1lVG9EYXRlU3RyaW5nKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IGRhdGVTdHJpbmc6IHN0cmluZ1tdID0gZGF0ZS50b1N0cmluZygpLnNwbGl0KCdUJylbMF0uc3BsaXQoJy0nKTtcblxuICAgIHJldHVybiBgJHtkYXRlU3RyaW5nWzBdfS0ke2RhdGVTdHJpbmdbMV19LSR7ZGF0ZVN0cmluZ1syXX1gO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBjb252ZXJ0U3RyaW5nVG9EYXRlKHRleHQ6IHN0cmluZyk6IERhdGUge1xuICAgIGNvbnN0IGRhdGVTdHJpbmc6IHN0cmluZ1tdID0gdGV4dC5zcGxpdCgnLScpO1xuXG4gICAgcmV0dXJuIG5ldyBEYXRlKCtkYXRlU3RyaW5nWzBdLCAoK2RhdGVTdHJpbmdbMV0pIC0gMSwgK2RhdGVTdHJpbmdbMl0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIHVtIGRldGVybWluYWRvIGFubyDDqSBiaXNzZXh0by5cbiAgICogQHBhcmFtIHllYXIgQW5vIGEgc2VyIHZlcmlmaWNhZG8uXG4gICAqIEByZXR1cm5zIFJldG9ybmEgdHJ1ZSBzZSBvIGFubyBmb3IgYmlzc2V4dG8gZSBmYWxzZSBzZSBlbGUgbsOjbyBmb3IsIG91IHNlIG8gYW5vIGluZm9ybWFkbyBmb3IgaW52w6FsaWRvLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBpc0xlYXBZZWFyKHllYXI6IG51bWJlciB8IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IFlFQVJfTlVNQkVSOiBudW1iZXIgPSB0eXBlb2YgeWVhciA9PT0gJ3N0cmluZycgPyBwYXJzZUludCh5ZWFyKSA6IHllYXI7XG5cbiAgICBpZiAoIWlzTmFOKFlFQVJfTlVNQkVSKSkge1xuICAgICAgaWYgKChZRUFSX05VTUJFUiAlIDQgPT09IDAgJiYgWUVBUl9OVU1CRVIgJSAxMDAgIT09IDApIHx8IFlFQVJfTlVNQkVSICUgNDAwID09PSAwKSByZXR1cm4gdHJ1ZTtcbiAgICAgIGVsc2UgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBlbHNlIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSB1bWEgZGV0ZXJtaW5hZGEgZGF0YSDDqSBpbmRldGVybWluYWRhLlxuICAgKiBAcGFyYW0gZGF0ZVRpbWUgRGF0YSBhIHNlciB2ZXJpZmljYWRhLlxuICAgKiBAcmV0dXJucyBSZXRvcm5hIHRydWUgc2UgZm9yIGluZGV0ZXJtaW5hZGEgZSBmYWxzZSBzZSBuw6NvIGZvci5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgdmVyaWZ5RGF0ZUlzSW5kZXRlcm1pbmF0ZShkYXRlVGltZTogRGF0ZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBkYXRlVGltZS50b1N0cmluZygpLnNwbGl0KCdUJylbMF0gPT09ICcyMDk5LTEyLTMxJztcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSB1bWEgZGV0ZXJtaW5hZGEgZGF0YSDDqSBudWxhIChpZ3VhbCBhICcxOTAwLTAxLTAxVDAwOjAwOjAwJykuXG4gICAqIEBwYXJhbSBkYXRlVGltZSBEYXRhIGEgc2VyIHZlcmlmaWNhZGEuXG4gICAqIEByZXR1cm5zIFJldG9ybmEgdHJ1ZSBzZSBmb3IgbnVsYSBlIGZhbHNlIHNlIG7Do28gZm9yLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyB2ZXJpZnlEYXRlSXNOdWxsKGRhdGVUaW1lOiBEYXRlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGRhdGVUaW1lLnRvU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSA9PT0gJzE5MDAtMDEtMDEnO1xuICB9XG5cbiAgLyoqXG4gICAqIFRlbnRhIHJlYWxpemFyIHVtIHBhcnNlIGRlIHVtYSBkYXRhIGNvbSBvcyBzZWd1aW50ZXMgdmFsb3JlczogZGQvTU0veXl5eSBISDptbVxuICAgKiBcbiAgICogQHBhcmFtIHZhbHVlIFN0cmluZyBxdWUgY29udMOpbSBhIGRhdGEgZm9ybWF0YWRhIGVtIHB0LWJyXG4gICAqIEBwYXJhbSBkYXRlU2VwYXJhdG9yIFNlcGFyYWRvciBkYSBkYXRhLlxuICAgKiBAcmV0dXJucyBcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgcGFyc2VEYXRlVGltZSh2YWx1ZTogc3RyaW5nLCBkYXRlU2VwYXJhdG9yOiBzdHJpbmcgPSBcIi9cIik6IERhdGUgfCB1bmRlZmluZWQge1xuICAgIGxldCB1c0RhdGUgPSBcIlwiO1xuXG4gICAgdmFsdWUgPSB2YWx1ZS50cmltKCk7XG5cbiAgICBsZXQgZGF0ZUFuZFRpbWU6IHN0cmluZ1tdID0gdmFsdWUuc3BsaXQoXCIgXCIpO1xuXG4gICAgLy8gUG9zc3VpIHBlbG8gbWVub3MgNSBjYXJhY3RlcmVzOiAxLzEvMVxuICAgIGlmICh2YWx1ZS5sZW5ndGggPj0gNSkge1xuICAgICAgbGV0IGRhdGVTZXBhcmF0ZWQ6IHN0cmluZ1tdID0gZGF0ZUFuZFRpbWVbMF0uc3BsaXQoZGF0ZVNlcGFyYXRvcik7XG5cbiAgICAgIGlmIChkYXRlU2VwYXJhdGVkLmxlbmd0aCAhPT0gMykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChkYXRlU2VwYXJhdGVkWzJdLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgZGF0ZVNlcGFyYXRlZFsyXSA9IGAke2RhdGVTZXBhcmF0ZWRbMl0uY2hhckF0KDApfSR7ZGF0ZVNlcGFyYXRlZFsyXS5jaGFyQXQoMSl9YC50cmltKCk7XG4gICAgICB9XG5cbiAgICAgIHVzRGF0ZSA9IGAke2RhdGVTZXBhcmF0ZWRbMV19LyR7ZGF0ZVNlcGFyYXRlZFswXX0vJHtkYXRlU2VwYXJhdGVkWzJdfWBcbiAgICB9XG5cbiAgICBpZiAoZGF0ZUFuZFRpbWUubGVuZ3RoID09PSAyKSB7XG5cbiAgICAgIHVzRGF0ZSArPSBgICR7ZGF0ZUFuZFRpbWVbMV19YDtcbiAgICB9XG5cbiAgICBsZXQgZXhwZWN0ZWREYXRlOiBudW1iZXIgPSBEYXRlLnBhcnNlKHVzRGF0ZSk7XG5cbiAgICBpZiAoZXhwZWN0ZWREYXRlICE9PSBudWxsIHx8IGV4cGVjdGVkRGF0ZSA8IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IERhdGUoZXhwZWN0ZWREYXRlKTtcbiAgfVxuXG4gIC8vIE9idMOpbSBhIERhdGEgbG9jYWxcbiAgcHVibGljIHN0YXRpYyBnZXREYXRlTG9jYWxUaW1lKGRhdGU6IERhdGUpOiBEYXRlIHtcbiAgICByZXR1cm4gKG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpIC0gZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpICogNjAwMDApKTtcbiAgfVxuXG4gIC8vIE9idMOpbSBhIERhdGEgbG9jYWwgbm8gUGFkcsOjbyBJc29cbiAgcHVibGljIHN0YXRpYyBnZXREYXRlTG9jYWxUaW1lSVNPKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAgIHJldHVybiAodGhpcy5nZXREYXRlTG9jYWxUaW1lKGRhdGUpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgnLjAwMFonLCAnJykpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZXREYXRlUGlja2VyRGF0ZShzdHI6IFN0cmluZyk6IERhdGUge1xuICAgIGNvbnN0IFtkYXRlQ29tcG9uZW50cywgdGltZUNvbXBvbmVudHNdID0gc3RyLnNwbGl0KCdUJylcbiAgICBjb25zdCBbYW5vLCBtZXMsIGRpYV0gPSBkYXRlQ29tcG9uZW50cy5zcGxpdCgnLScpO1xuICAgIGNvbnN0IFtob3JhLCBtaW51dG8sIHNlZ3VuZG9dID0gdGltZUNvbXBvbmVudHMuc3BsaXQoJzonKTtcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoTnVtYmVyKGFubyksIE51bWJlcihtZXMpLCBOdW1iZXIoZGlhKSlcblxuICAgIHJldHVybiBkYXRlXG4gIH1cblxuICBwdWJsaWMgc3RhdGljIEFkaWNpb25hRGlhcyhkYXRhOiBEYXRlLCBkYXlzOiBudW1iZXIpOiBEYXRlIHtcbiAgICBjb25zdCBmaW5kID0gbmV3IERhdGUoTnVtYmVyKGRhdGEpKVxuXG4gICAgZmluZC5zZXREYXRlKGRhdGEuZ2V0RGF0ZSgpICsgZGF5cylcblxuICAgIHJldHVybiBmaW5kXG4gIH1cblxuICBwdWJsaWMgc3RhdGljIERpZmVyZW5jYURpYXMoZGF0YUluaWNpYWw6IERhdGUsIGRhdGFGaW5hbDogRGF0ZSk6IG51bWJlciB7XG4gICAgdmFyIFRpbWUgPSBkYXRhRmluYWwuZ2V0VGltZSgpIC0gZGF0YUluaWNpYWwuZ2V0VGltZSgpO1xuXG4gICAgcmV0dXJuIFRpbWUgLyAoMTAwMCAqIDM2MDAgKiAyNCk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIERpZmVyZW5jYU1lc2VzKGRhdGFJbmljaWFsOiBEYXRlLCBkYXRhRmluYWw6IERhdGUpOiBudW1iZXIge1xuICAgIHZhciBtZXNlcyA9IChkYXRhRmluYWwuZ2V0RnVsbFllYXIoKSAtIGRhdGFJbmljaWFsLmdldEZ1bGxZZWFyKCkpICogMTI7XG4gICAgbWVzZXMgLT0gZGF0YUluaWNpYWwuZ2V0TW9udGgoKTtcbiAgICBtZXNlcyArPSBkYXRhRmluYWwuZ2V0TW9udGgoKTtcblxuICAgIHJldHVybiBtZXNlcyA8PSAwID8gMCA6IG1lc2VzO1xuICB9XG5cblxuICAvL09idMOpbSBhIERhdGEgVVRDIGNvbSBob3JhIHplcmFkYVxuICBwdWJsaWMgc3RhdGljIGdldERhdGVVVEMoZGF0ZTogRGF0ZSk6IERhdGUge1xuICAgIC8vY29kaWdvIG9yaWdpbmFsXG4gICAgLy9yZXR1cm4gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkgKyAoZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpICogNjAwMDApKTtcbiAgICBsZXQgZGF0YVNhaWRhOiBEYXRlO1xuXG4gICAgdHJ5IHtcbiAgICAgIGRhdGFTYWlkYSA9IG5ldyBEYXRlKGRhdGUuZ2V0VVRDRnVsbFllYXIoKSwgZGF0ZS5nZXRVVENNb250aCgpLCBkYXRlLmdldFVUQ0RhdGUoKSwgMCwgMCwgMCk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgLy9RdWFuZG8gZGF0ZSBjaGVnYSBuZXN0ZSBmb3JtYXRvOiAyMDIyLTA2LTIwVDAwOjAwOjAwXG4gICAgICAvL3RlbnRvIHBlZ2FyIGFuby9tZXMvZGlhIGRpcmV0byBcbiAgICAgIC8vRGF0ZShEdEluaUZlci5nZXRVVENGdWxsWWVhcigpLCBEdEluaUZlci5nZXRVVENNb250aCgpLCBEdEluaUZlci5nZXRVVENEYXRlKCksIDAgLCAwICwgMCk7XG4gICAgICAvL2UgbsOjbyBmdW5jaW9uYVxuICAgICAgY29uc3QgZGlhOiBzdHJpbmcgPSBkYXRlLnRvU3RyaW5nKCkuc3Vic3RyaW5nKDgsIDEwKTtcbiAgICAgIGNvbnN0IG1lczogc3RyaW5nID0gZGF0ZS50b1N0cmluZygpLnN1YnN0cmluZyg1LCA3KTtcbiAgICAgIGNvbnN0IGFubzogc3RyaW5nID0gZGF0ZS50b1N0cmluZygpLnN1YnN0cmluZygwLCA0KTtcbiAgICAgIGRhdGFTYWlkYSA9IG5ldyBEYXRlKE51bWJlcihhbm8pLCBOdW1iZXIobWVzKSAtIDEsIE51bWJlcihkaWEpLCAwLCAwLCAwKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YVNhaWRhO1xuICB9XG5cbiAgLy9PYnTDqW0gYSBEYXRhIFVUQyBjb20gaG9yYSB6ZXJhZGFcbiAgcHVibGljIHN0YXRpYyBnZXREYXRlZGRNTXl5eShkYXRlOiBEYXRlKTogc3RyaW5nIHtcbiAgICAvL2NvZGlnbyBvcmlnaW5hbFxuICAgIC8vcmV0dXJuIG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpICsgKGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKSAqIDYwMDAwKSk7XG4gICAgbGV0IGRhdGFTYWlkYTogRGF0ZTtcblxuICAgIHRyeSB7XG4gICAgICBkYXRhU2FpZGEgPSBuZXcgRGF0ZShkYXRlLmdldFVUQ0Z1bGxZZWFyKCksIGRhdGUuZ2V0VVRDTW9udGgoKSwgZGF0ZS5nZXRVVENEYXRlKCksIDAsIDAsIDApO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vUXVhbmRvIGRhdGUgY2hlZ2EgbmVzdGUgZm9ybWF0bzogMjAyMi0wNi0yMFQwMDowMDowMFxuICAgICAgLy90ZW50byBwZWdhciBhbm8vbWVzL2RpYSBkaXJldG8gXG4gICAgICAvL0RhdGUoRHRJbmlGZXIuZ2V0VVRDRnVsbFllYXIoKSwgRHRJbmlGZXIuZ2V0VVRDTW9udGgoKSwgRHRJbmlGZXIuZ2V0VVRDRGF0ZSgpLCAwICwgMCAsIDApO1xuICAgICAgLy9lIG7Do28gZnVuY2lvbmFcbiAgICAgIGNvbnN0IGRpYTogc3RyaW5nID0gZGF0ZS50b1N0cmluZygpLnN1YnN0cmluZyg4LCAxMCk7XG4gICAgICBjb25zdCBtZXM6IHN0cmluZyA9IGRhdGUudG9TdHJpbmcoKS5zdWJzdHJpbmcoNSwgNyk7XG4gICAgICBjb25zdCBhbm86IHN0cmluZyA9IGRhdGUudG9TdHJpbmcoKS5zdWJzdHJpbmcoMCwgNCk7XG5cbiAgICAgIGRhdGFTYWlkYSA9IG5ldyBEYXRlKE51bWJlcihhbm8pLCBOdW1iZXIobWVzKSAtIDEsIE51bWJlcihkaWEpLCAwLCAwLCAwKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYWQoczogYW55KSB7IHJldHVybiAocyA8IDEwKSA/ICcwJyArIHMgOiBzOyB9XG5cbiAgICByZXR1cm4gW3BhZChkYXRhU2FpZGEuZ2V0VVRDRGF0ZSgpKSwgcGFkKGRhdGFTYWlkYS5nZXRVVENNb250aCgpICsgMSksIHBhZChkYXRhU2FpZGEuZ2V0VVRDRnVsbFllYXIoKSldLmpvaW4oJy8nKTtcbiAgfVxuXG4gIC8vT2J0w6ltIGEgRGF0YSBVVEMgY29tIGEgaG9yYVxuICBwdWJsaWMgc3RhdGljIGdldERhdGVkZE1NeXl5eUhobW1zcyhkYXRlOiBEYXRlKTogc3RyaW5nIHtcbiAgICBsZXQgZGF0YVNhaWRhOiBEYXRlO1xuXG4gICAgdHJ5IHtcbiAgICAgIGRhdGFTYWlkYSA9IG5ldyBEYXRlKGRhdGUuZ2V0VVRDRnVsbFllYXIoKSwgZGF0ZS5nZXRVVENNb250aCgpLCBkYXRlLmdldFVUQ0RhdGUoKSwgZGF0ZS5nZXRIb3VycygpLCBkYXRlLmdldE1pbnV0ZXMoKSwgZGF0ZS5nZXRTZWNvbmRzKCkpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vUXVhbmRvIGRhdGUgY2hlZ2EgbmVzdGUgZm9ybWF0bzogMjAyMi0wNi0yMFQwMDowMDowMFxuICAgICAgLy90ZW50byBwZWdhciBhbm8vbWVzL2RpYSBkaXJldG8gXG4gICAgICAvL0RhdGUoRHRJbmlGZXIuZ2V0VVRDRnVsbFllYXIoKSwgRHRJbmlGZXIuZ2V0VVRDTW9udGgoKSwgRHRJbmlGZXIuZ2V0VVRDRGF0ZSgpLCAwICwgMCAsIDApO1xuICAgICAgLy9lIG7Do28gZnVuY2lvbmFcbiAgICAgIGNvbnN0IGRpYTogc3RyaW5nID0gZGF0ZS50b1N0cmluZygpLnN1YnN0cmluZyg4LCAxMCk7XG4gICAgICBjb25zdCBtZXM6IHN0cmluZyA9IGRhdGUudG9TdHJpbmcoKS5zdWJzdHJpbmcoNSwgNyk7XG4gICAgICBjb25zdCBhbm86IHN0cmluZyA9IGRhdGUudG9TdHJpbmcoKS5zdWJzdHJpbmcoMCwgNCk7XG4gICAgICBjb25zdCBob3JhOiBzdHJpbmcgPSBkYXRlLnRvU3RyaW5nKCkuc3Vic3RyaW5nKDExLCAxMyk7XG4gICAgICBjb25zdCBtaW51dG9zOiBzdHJpbmcgPSBkYXRlLnRvU3RyaW5nKCkuc3Vic3RyaW5nKDE0LCAxNik7XG4gICAgICBjb25zdCBzZWd1bmRvczogc3RyaW5nID0gZGF0ZS50b1N0cmluZygpLnN1YnN0cmluZygxNywgMTkpO1xuXG4gICAgICBkYXRhU2FpZGEgPSBuZXcgRGF0ZShOdW1iZXIoYW5vKSwgTnVtYmVyKG1lcykgLSAxLCBOdW1iZXIoZGlhKSwgTnVtYmVyKGhvcmEpLCBOdW1iZXIobWludXRvcyksIE51bWJlcihzZWd1bmRvcykpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhZChzOiBhbnkpIHsgcmV0dXJuIChzIDwgMTApID8gJzAnICsgcyA6IHM7IH1cblxuICAgIGxldCBkYXRhRm9ybWF0YWRhOiBzdHJpbmcgPSBbcGFkKGRhdGFTYWlkYS5nZXREYXRlKCkpLCBwYWQoZGF0YVNhaWRhLmdldFVUQ01vbnRoKCkgKyAxKSwgcGFkKGRhdGFTYWlkYS5nZXRVVENGdWxsWWVhcigpKV0uam9pbignLycpO1xuXG4gICAgZGF0YUZvcm1hdGFkYSArPSBcIiBcIjtcbiAgICBkYXRhRm9ybWF0YWRhICs9IFtwYWQoZGF0YVNhaWRhLmdldEhvdXJzKCkpLCBwYWQoZGF0YVNhaWRhLmdldE1pbnV0ZXMoKSksIHBhZChkYXRhU2FpZGEuZ2V0U2Vjb25kcygpKV0uam9pbignOicpO1xuXG4gICAgcmV0dXJuIGRhdGFGb3JtYXRhZGE7XG4gIH1cblxuICBzdGF0aWMgVWx0aW1vRGlhTWVzKGRhdGE6IERhdGUpOiBEYXRlIHtcbiAgICBsZXQgZGF0YVNhaWRhOiBEYXRlID0gdGhpcy5nZXREYXRlVGltZVVUQyhkYXRhKTtcbiAgICAvLyBhZGljaW9uYSAxIG1lc1xuICAgIGRhdGFTYWlkYS5zZXRNb250aChkYXRhU2FpZGEuZ2V0VVRDTW9udGgoKSArIDEpO1xuICAgIC8vUG9zaWNpb25hIG5vIGRpYSAwMSBkbyBtZXMgYWRpY2lvbmFkb1xuICAgIGRhdGFTYWlkYSA9IG5ldyBEYXRlKGRhdGFTYWlkYS5nZXRVVENGdWxsWWVhcigpLCBkYXRhU2FpZGEuZ2V0VVRDTW9udGgoKSwgMSwgMCwgMCwgMCk7XG4gICAgLy8gc3VidHJhaSAxIGRpYSBwYXJhIGlyIHBhcmEgbyB1bHRpbW8gZGlhIGRvIG1lc1xuICAgIGRhdGFTYWlkYS5zZXREYXRlKGRhdGFTYWlkYS5nZXREYXRlKCkgLSAxKTtcblxuICAgIHJldHVybiBkYXRhU2FpZGE7XG4gIH1cblxuICAvL09idMOpbSBhIERhdGEvaG9yYSBVVENcbiAgcHVibGljIHN0YXRpYyBnZXREYXRlVGltZVVUQyhkYXRlOiBEYXRlKTogRGF0ZSB7XG4gICAgbGV0IGRhdGFTYWlkYTogRGF0ZTtcblxuICAgIHRyeSB7XG4gICAgICBkYXRhU2FpZGEgPSBuZXcgRGF0ZShkYXRlLmdldFVUQ0Z1bGxZZWFyKCksIGRhdGUuZ2V0VVRDTW9udGgoKSwgZGF0ZS5nZXRVVENEYXRlKCksIGRhdGUuZ2V0SG91cnMoKSwgZGF0ZS5nZXRNaW51dGVzKCksIGRhdGUuZ2V0U2Vjb25kcygpKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvL1F1YW5kbyBkYXRlIGNoZWdhIG5lc3RlIGZvcm1hdG86IDIwMjItMDYtMjBUMTE6MTI6MTNcbiAgICAgIGNvbnN0IGRpYTogc3RyaW5nID0gZGF0ZS50b1N0cmluZygpLnN1YnN0cmluZyg4LCAxMCk7XG4gICAgICBjb25zdCBtZXM6IHN0cmluZyA9IGRhdGUudG9TdHJpbmcoKS5zdWJzdHJpbmcoNSwgNyk7XG4gICAgICBjb25zdCBhbm86IHN0cmluZyA9IGRhdGUudG9TdHJpbmcoKS5zdWJzdHJpbmcoMCwgNCk7XG4gICAgICBjb25zdCBob3JhOiBzdHJpbmcgPSBkYXRlLnRvU3RyaW5nKCkuc3Vic3RyaW5nKDExLCAxMyk7XG4gICAgICBjb25zdCBtaW46IHN0cmluZyA9IGRhdGUudG9TdHJpbmcoKS5zdWJzdHJpbmcoMTQsIDE2KTtcbiAgICAgIGNvbnN0IHNlZzogc3RyaW5nID0gZGF0ZS50b1N0cmluZygpLnN1YnN0cmluZygxNywgMTkpO1xuICAgICAgZGF0YVNhaWRhID0gbmV3IERhdGUoTnVtYmVyKGFubyksIE51bWJlcihtZXMpIC0gMSwgTnVtYmVyKGRpYSksIE51bWJlcihob3JhKSwgTnVtYmVyKG1pbiksIE51bWJlcihzZWcpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YVNhaWRhO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBjb21wYXJlRXF1YWxEYXRlcyhkYXRlMTogRGF0ZSwgZGF0ZTI6IERhdGUpOiBib29sZWFuIHtcbiAgICBsZXQgc3RyRGF0ZTE6IHN0cmluZyA9IFV0aWxzLmdldERhdGVkZE1NeXl5KGRhdGUxKTtcbiAgICBsZXQgc3RyRGF0ZTI6IHN0cmluZyA9IFV0aWxzLmdldERhdGVkZE1NeXl5KGRhdGUyKTtcblxuICAgIGlmIChzdHJEYXRlMSA9PT0gc3RyRGF0ZTIpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBjb252ZXJ0TU1ZWVlZVG9EYXRlKHZhbHVlOiBzdHJpbmcpOiBEYXRlIHtcbiAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoJy8nLCAnJyk7XG5cbiAgICBsZXQgbW9udGg6IG51bWJlciA9IE51bWJlcih2YWx1ZS5zdWJzdHJpbmcoMCwgMikpO1xuICAgIGxldCB5ZWFyOiBudW1iZXIgPSBOdW1iZXIodmFsdWUuc3Vic3RyaW5nKDIsIDYpKTtcblxuICAgIC8vRGltaW51aSAxIHBvaXMgbm8gYW5ndWxhciBleGlzdGUgdW0gw61uZGljZSBkbyBtw6pzIHF1ZSBuw6NvIMOpIGlndWFsIGFvIG3DqnMuXG4gICAgbW9udGggPSBtb250aCAtIDE7XG5cbiAgICByZXR1cm4gbmV3IERhdGUoeWVhciwgbW9udGgsIDEpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZXROdWxsRGF0ZSgpOiBEYXRlIHtcbiAgICByZXR1cm4gbmV3IERhdGUoMTkwMCwgMCwgMSwgMCwgMCwgMCk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGdldERhdGVXZWJTZXJ2aWNlRm9ybWF0KHZhbHVlOiBEYXRlKTogc3RyaW5nIHtcblxuICAgIGlmICh2YWx1ZS50b1N0cmluZygpID09ICcnKSB7XG4gICAgICByZXR1cm4gJzE5MDAtMDEtMDEnO1xuICAgIH1cblxuICAgIGxldCBkYXRhID0gVXRpbHMuZ2V0RGF0ZWRkTU15eXkodmFsdWUpO1xuXG4gICAgcmV0dXJuIGRhdGEuc3Vic3RyaW5nKDYsIDEwKSArICctJyArIGRhdGEuc3Vic3RyaW5nKDMsIDUpICsgJy0nICsgZGF0YS5zdWJzdHJpbmcoMCwgMik7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGdldERhdGVUaW1lV2ViU2VydmljZUZvcm1hdCh2YWx1ZTogRGF0ZSk6IHN0cmluZyB7XG4gICAgaWYgKHZhbHVlLnRvU3RyaW5nKCkgPT0gJycgfHwgVXRpbHMuZ2V0RGF0ZWRkTU15eXkodmFsdWUpID09IFV0aWxzLmdldERhdGVkZE1NeXl5KHRoaXMuZ2V0TnVsbERhdGUoKSkpIHtcbiAgICAgICAgcmV0dXJuICcxOTAwLTAxLTAxVDAwOjAwOjAwJztcbiAgICB9XG4gIFxuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh2YWx1ZSk7XG4gIFxuICAgIC8vIE9idGVuZG8gb3MgY29tcG9uZW50ZXMgaW5kaXZpZHVhaXMgZGEgZGF0YVxuICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgY29uc3QgbW9udGggPSBkYXRlLmdldE1vbnRoKCk7XG4gICAgY29uc3QgZGF5ID0gZGF0ZS5nZXREYXRlKCk7XG4gICAgY29uc3QgaG91cnMgPSBkYXRlLmdldEhvdXJzKCk7XG4gICAgY29uc3QgbWludXRlcyA9IGRhdGUuZ2V0TWludXRlcygpO1xuICAgIGNvbnN0IHNlY29uZHMgPSBkYXRlLmdldFNlY29uZHMoKTsgXG4gIFxuICAgIGNvbnN0IGZvcm1hdHRlZERhdGUgPSBgJHt5ZWFyfS0keyhtb250aCArIDEpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX0tJHtkYXkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfVQke2hvdXJzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX06JHttaW51dGVzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX06JHtzZWNvbmRzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gO1xuICAgIFxuICAgIHJldHVybiBmb3JtYXR0ZWREYXRlO1xuICB9XG5cbiAgLy9UcmFuc2Zvcm1hIGEgc3RyaW5nIEJhc2U2NCBudW0gYXJyYXkgZGUgYnl0ZXMgZSBmYXogbyBkb3dubG9hZCBkbyBhcnF1aXZvLlxuICBwdWJsaWMgc3RhdGljIGRvd25sb2FkRmlsZUJhc2U2NChmbGVOYW1lOiBzdHJpbmcsIGZpbGU6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IGJ5dGVTdHJpbmcgPSB3aW5kb3cuYXRvYihmaWxlKTtcbiAgICBjb25zdCBhcnJheUJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihieXRlU3RyaW5nLmxlbmd0aCk7XG4gICAgY29uc3QgaW50OEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBieXRlU3RyaW5nLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpbnQ4QXJyYXlbaV0gPSBieXRlU3RyaW5nLmNoYXJDb2RlQXQoaSk7XG4gICAgfVxuXG4gICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtpbnQ4QXJyYXldKTtcblxuICAgIGNvbnN0IHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXG4gICAgLy9BYmlvXG4gICAgLy9PIHdpbmRvdy5vcGVuIGZvaSBjb21lbnRhZG8gcG9ycXVlIG5vIGRvd25sb2FkIGRvcyBhcnF1aXZvcyBkaWdpdGFpcyBhYnJpYSB1bWEgamFuZWxhIGNvbSBvIGJsb2IgZG8gYXJxdWl2by4gXG4gICAgLy9Db21lbnRhciBuw6NvIGFmZXRvdSBvIGRvd25sb2FkIGRvIGNvbnRyYS1jaGVxdWUuICBcbiAgICAvL3dpbmRvdy5vcGVuKHVybCk7XG4gICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG5cbiAgICBhLmhyZWYgPSB1cmw7XG4gICAgYS50YXJnZXQgPSAnX2JsYW5rJztcbiAgICBhLmRvd25sb2FkID0gZmxlTmFtZTtcblxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7XG5cbiAgICBhLmNsaWNrKCk7XG4gIH1cblxuICAvKipcbiAgKiBBYnJlIG8gcG9wdXAgZG8gbmF2ZWdhZG9yIHBhcmEgYmFpeGFyIHVtIGFycXVpdm8gcXVlIHZlaW8gZGUgdW0gYmxvYi5cbiAgKiBcbiAgKiBAcGFyYW0gYmxvYiBDb250ZcO6ZG8gZG8gYXJxdWl2byBiaW7DoXJpbyBhIHNlciBiYWl4YWRvLlxuICAqIEBwYXJhbSBmaWxlTmFtZSBOb21lIGRvIGFycXVpdm8gYSBzZXIgc2Fsdm8uXG4gICovXG4gIHB1YmxpYyBzdGF0aWMgZG93bmxvYWRGaWxlKGJsb2I6IEJsb2IsIGZpbGVOYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBhbmNob3IgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuXG4gICAgYW5jaG9yLmhyZWYgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICBhbmNob3IuZG93bmxvYWQgPSBmaWxlTmFtZTtcblxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYW5jaG9yKTtcblxuICAgIGFuY2hvci5jbGljaygpO1xuXG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhbmNob3IpO1xuICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKGFuY2hvci5ocmVmKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgYjY0RGVjb2RlVW5pY29kZShzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gR29pbmcgYmFja3dhcmRzOiBmcm9tIGJ5dGVzdHJlYW0sIHRvIHBlcmNlbnQtZW5jb2RpbmcsIHRvIG9yaWdpbmFsIHN0cmluZy5cbiAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGF0b2Ioc3RyKS5zcGxpdCgnJykubWFwKGMgPT4ge1xuICAgICAgcmV0dXJuICclJyArICgnMDAnICsgYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpO1xuICAgIH0pLmpvaW4oJycpKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgYjY0RW5jb2RlVW5pY29kZShzdHI6IHN0cmluZykge1xuICAgIC8vIGZpcnN0IHdlIHVzZSBlbmNvZGVVUklDb21wb25lbnQgdG8gZ2V0IHBlcmNlbnQtZW5jb2RlZCBVVEYtOCxcbiAgICAvLyB0aGVuIHdlIGNvbnZlcnQgdGhlIHBlcmNlbnQgZW5jb2RpbmdzIGludG8gcmF3IGJ5dGVzIHdoaWNoXG4gICAgLy8gY2FuIGJlIGZlZCBpbnRvIGJ0b2EuXG4gICAgcmV0dXJuIGJ0b2EoZW5jb2RlVVJJQ29tcG9uZW50KHN0cikucmVwbGFjZSgvJShbMC05QS1GXXsyfSkvZyxcbiAgICAgIChtYXRjaCwgcDEpID0+IHtcbiAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoKFwiMHhcIiArIHAxKSBhcyBhbnkpO1xuICAgICAgfSkpO1xuICB9XG5cbiAgLy9MYXJndXJhIGEgcGFydGlyIGRlIG9uZGUgcmVtb250YSBvIG5neF9kYXRhdGFibGUgcGFyYSBtb2JpbGVcbiAgcHVibGljIHN0YXRpYyBnZXRJc01vYmlsZSgpIHtcbiAgICBjb25zdCB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCB8fCBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoO1xuICAgIHJldHVybiB3aWR0aCA8IDc2ODtcbiAgfVxuXG59XG4iXX0=